import{b as c,j as n,d8 as ae,S as J,B as Y,u as te,k as U,$ as re,F as Z,O as oe,aG as W,r as ce,i as ue,T as ie}from"./index.5670e6e0.js";import{S as le}from"./Skeleton.c599669d.js";import{H as de}from"./index.04556cd2.js";import{H as me}from"./index.9fe94518.js";import{M as u}from"./manage.653bb3f0.js";import{P as fe}from"./index.c6660251.js";import{D as xe}from"./dropdown.706ec38f.js";/* empty css                    *//* empty css                 */import"./PurePanel.2a417db7.js";import"./index.42a6e0fb.js";import"./index.92e459fd.js";import"./collapse.e34cf270.js";import"./useFlexGapSupport.172cfcf4.js";const pe="_customerInfo_1cvix_1",he="_customerHeader_1cvix_8",ne={customerInfo:pe,customerHeader:he};function Ne(m){const{visibleShare:e,setVisibleShare:i,id:d}=m;return c(fe,{visible:e,onClose:()=>i(!1),showCloseButton:!0,bodyStyle:{height:"auto",borderRadius:"20px 20px 0 0"},children:c("div",{className:"py-12 px-10",children:n("div",{onClick:()=>{ae(`${window.location.origin}/share?type=${1}&id=${d}`),i(!1)},className:"flex rounded-lg py-1 bg-gradient-to-r from-[#3a5050]  to-[#768586] justify-center items-center text-color-[#fff]",children:[c(J,{name:"copy",className:"w-[16px] h-[16px]"}),c(Y,{className:"text-color-[#fff]",fill:"none",children:"\u590D\u5236\u94FE\u63A5"})]})})})}const ye=m=>{var p,h,N,y,F,E,A,v,b,g,k,C,B,D,w,_,S,$,j,I,H,O,z,P,R,V,M,T,q,G,L;const{detail:e,isExclusive:i,refresh:d}=m,l=te(),{runAsync:f}=U(()=>{var a;return u.deleteStaff({id:(a=e==null?void 0:e.data)==null?void 0:a.id})},{manual:!0,onSuccess(){l("/manage/employee/list")}}),{runAsync:s}=U(()=>{var a;return u.cancelStaff({id:(a=e==null?void 0:e.data)==null?void 0:a.id})},{manual:!0,onSuccess(){l("/manage/employee/list")}}),{runAsync:x}=U(()=>{var a;return u.staffOnline({id:(a=e==null?void 0:e.data)==null?void 0:a.id})},{manual:!0,onSuccess(){d()}}),X=[{key:"1",label:c("span",{onClick:()=>{var a;return l("/manage/add/employee/information",{state:{id:(a=e==null?void 0:e.data)==null?void 0:a.id}})},children:"\u7F16\u8F91\u8D44\u6599"})},{key:"2",label:c("span",{onClick:()=>{var a;return ae(`${window.location.origin}/share?type=${1}&id=${(a=e==null?void 0:e.data)==null?void 0:a.id}`)},children:"\u5206\u4EAB\u94FE\u63A5"})}],K=((p=e==null?void 0:e.data)==null?void 0:p.type)===1?[{key:"5",label:((h=e==null?void 0:e.data)==null?void 0:h.online)===1?c("span",{onClick:x,children:"\u663E\u793A\u4E0B\u7EBF"}):c("span",{onClick:x,children:"\u663E\u793A\u4E0A\u7EBF"})},{key:"6",label:c("span",{onClick:()=>l("/calendar"),children:"\u67E5\u770B\u9884\u7EA6\u65E5\u5386"})}]:[{key:"6",label:c("span",{onClick:()=>l("/calendar"),children:"\u67E5\u770B\u9884\u7EA6\u65E5\u5386"})}],Q=[...X,{key:"3",label:i?c("span",{onClick:()=>{W.show({content:c("div",{className:"font-600 text-center pb-2 text-xl",children:"\u786E\u5B9A\u8981\u5220\u9664\u5458\u5DE5"}),closeOnAction:!0,actions:[[{key:"cancel",text:"\u53D6\u6D88",className:"dialog-cancel"},{key:"confirm",text:"\u786E\u8BA4",className:"dialog-confirm",async onClick(){f()}}]]})},children:"\u5220\u9664\u5458\u5DE5"}):c("span",{onClick:()=>{W.show({content:c("div",{className:"font-600 text-center pb-2 text-xl",children:"\u786E\u5B9A\u53D6\u6D88\u5173\u8054"}),closeOnAction:!0,actions:[[{key:"cancel",text:"\u53D6\u6D88",className:"dialog-cancel"},{key:"confirm",text:"\u786E\u8BA4",className:"dialog-confirm",async onClick(){s()}}]]})},children:"\u53D6\u6D88\u5173\u8054"})},...K];return c("div",{className:"flex flex-col w-500px h-full justify-center <sm:hidden",children:n(le,{loading:!e,active:!0,children:[n("div",{className:"flex w-full justify-between",children:[n("div",{className:"flex items-center",children:[c("div",{className:"border border-solid flex justify-center items-center border-color-[#cee2ee] border-width-1px w-120px h-120px rounded-full",children:c(re,{name:(N=e==null?void 0:e.data)==null?void 0:N.nickname,headurl:(y=e==null?void 0:e.data)==null?void 0:y.head,sx:{width:106,height:106}})}),n("div",{className:"flex flex-col pl-8",children:[c("p",{className:"font-600 text-lg",children:(F=e==null?void 0:e.data)==null?void 0:F.nickname}),n("span",{className:"text-color-[#ACACAC] pt-1 pb-1 text-xs",children:["\u5458\u5DE5\u7F16\u53F7\uFF1A",(E=e==null?void 0:e.data)==null?void 0:E.id]}),((A=e==null?void 0:e.data)==null?void 0:A.type)===1&&n("div",{className:"w-60px flex py-0.5 justify-center items-center bg-[#fff] rounded-xl border border-color-[#e9e9e9] border-solid",children:[c("p",{className:"text-color-[#8c8c8c] text-xs pr-1",children:((v=e==null?void 0:e.data)==null?void 0:v.online)===1?"\u4E0A\u7EBF":"\u4E0B\u7EBF"}),c("span",{className:`${((b=e==null?void 0:e.data)==null?void 0:b.online)===1?"bg-[#2A4948]":"bg-[#970D0D]"} p-1 rounded-full`})]})]})]}),c(xe,{menu:{items:Q},placement:"bottom",children:c(J,{name:"point",className:"w-[18px] h-[10px] cursor-pointer"})})]}),n("div",{className:"flex justify-between pt-12",children:[n("div",{className:"flex flex-col w-[48%]",children:[n("div",{className:"flex flex-col rounded-2xl bg-[#f6f8f8] py-4 px-7",children:[n("div",{className:"flex text-xs items-center",children:[c("span",{className:"font-600 text-color-[#3F3F3F]",children:"\u5458\u5DE5\u90AE\u7BB1\uFF1A"}),c("span",{className:"underline cursor-pointer text-color-[#3F3F3F]",children:(g=e==null?void 0:e.data)==null?void 0:g.email})]}),n("div",{className:"flex text-xs items-center pt-1",children:[c("span",{className:"font-600 text-color-[#3F3F3F]",children:"\u5458\u5DE5\u624B\u673A\uFF1A"}),c("span",{className:"text-color-[#3F3F3F]",children:(k=e==null?void 0:e.data)==null?void 0:k.phone})]})]}),n("div",{className:"flex flex-col rounded-2xl bg-[#f6f8f8] py-4 px-7 mt-4",children:[n("div",{className:"flex text-xs text-color-[#3F3F3F]",children:[c("span",{className:"font-600 min-w-15",children:"\u5458\u5DE5\u6210\u672C\uFF1A"}),((C=e==null?void 0:e.data)==null?void 0:C.cost_type)===1&&n("p",{children:[(B=e==null?void 0:e.data)==null?void 0:B.cost,"%"]}),((D=e==null?void 0:e.data)==null?void 0:D.cost_type)===2&&n("div",{className:"text-xs",children:[n("div",{className:"flex",children:[c("p",{children:"\u5802\u98DF\uFF1A"}),c("div",{className:"flex",children:(S=(_=(w=e==null?void 0:e.data)==null?void 0:w.cost)==null?void 0:_.eat_in)==null?void 0:S.map((a,o)=>n("span",{children:[a.time,"min\uFF1A$",a==null?void 0:a.price,"\xA0"]},o))})]}),n("div",{children:[c("p",{children:"\u5916\u5356\uFF1A"}),c("div",{className:"flex",children:(I=(j=($=e==null?void 0:e.data)==null?void 0:$.cost)==null?void 0:j.take_out)==null?void 0:I.map((a,o)=>n("span",{children:[a.time,"min\uFF1A$",a==null?void 0:a.price,"\xA0"]},o))})]})]})]}),n("div",{className:"flex text-xs items-center pt-1 text-color-[#3F3F3F]",children:[c("span",{className:"font-600 min-w-15",children:"\u4ECB\u7ECD\u8D39\uFF1A"}),((H=e==null?void 0:e.data)==null?void 0:H.introducer_type)===1&&n("p",{children:[(O=e==null?void 0:e.data)==null?void 0:O.introducer_cost,"%"]}),((z=e==null?void 0:e.data)==null?void 0:z.introducer_type)===2&&c("div",{className:"text-xs",children:c("p",{className:"flex items-center",children:(R=(P=e==null?void 0:e.data)==null?void 0:P.introducer_cost)==null?void 0:R.map((a,o)=>n("span",{children:[a.time,"min\uFF1A$",a==null?void 0:a.price,"\u3001"]},o))})})]})]})]}),n("div",{className:"flex w-[48%] relative flex-col rounded-2xl bg-[#f6f8f8] py-4 px-7 text-color-[#3F3F3F] text-xs",children:[((V=e==null?void 0:e.data)==null?void 0:V.type)===1&&n(Z,{children:[n("div",{className:"leading-6 pt-3",children:[n("p",{children:["\u5B8C\u6210\u9884\u7EA6\u6570\uFF1A",(M=e==null?void 0:e.data)==null?void 0:M.order_num]}),n("p",{children:["\u5173\u6CE8\u4EBA\u6570\uFF1A",(T=e==null?void 0:e.data)==null?void 0:T.fans_num,"\u4EBA"]}),n("p",{children:["\u7EFC\u5408\u8BC4\u5206 ",(q=e==null?void 0:e.data)==null?void 0:q.synthesis_score," ",(G=e==null?void 0:e.data)==null?void 0:G.score_num,"\u4EBA\u8BC4\u5206"]})]}),c("a",{onClick:()=>l("/calendar"),className:"bg-[#e6f0ef] mt-3 bottom-4 absolute rounded-md text-xs p-1 text-color-[#2A4948]",children:"\u67E5\u770B\u9884\u7EA6\u65E5\u5386"})]}),((L=e==null?void 0:e.data)==null?void 0:L.type)!==1&&c("div",{className:"m-auto",children:"\u6CA1\u6709\u76F8\u5173\u6570\u636E"})]})]}),c("div",{onClick:()=>l(-1),className:"fixed top-80px right-40px",children:c(oe,{fontSize:24,className:"cursor-pointer"})})]})})},je=()=>{var p,h,N,y,F,E,A,v,b,g,k,C,B,D,w,_,S,$,j,I,H,O,z,P,R,V,M,T,q,G,L,a,o,ee,se;const[m,e]=ce.exports.useState(!1),[i,d]=ce.exports.useState(!1),l=te(),f=ue(),{data:s,refresh:x,loading:X}=U(()=>{var t;return u.getStaffDetail({id:(t=f==null?void 0:f.state)==null?void 0:t.id})}),K=((p=s==null?void 0:s.data)==null?void 0:p.type)===1,Q=K?{text:"\u5220\u9664\u5458\u5DE5",key:"delete",danger:!0,onClick:async()=>{W.show({content:c("div",{className:"font-600 text-center pb-2 text-xl",children:"\u786E\u5B9A\u8981\u5220\u9664\u5458\u5DE5"}),closeOnAction:!0,actions:[[{key:"cancel",text:"\u53D6\u6D88",className:"dialog-cancel"},{key:"confirm",text:"\u786E\u8BA4",className:"dialog-confirm",async onClick(){var r;(await u.deleteStaff({id:(r=s==null?void 0:s.data)==null?void 0:r.id})).status===200&&(e(!1),l("/manage/employee/list"))}}]]})}}:{text:"\u53D6\u6D88\u5173\u8054",key:"cancel",onClick:async()=>{W.show({content:c("div",{className:"font-600 text-center pb-2 text-xl",children:"\u786E\u5B9A\u53D6\u6D88\u5173\u8054"}),closeOnAction:!0,actions:[[{key:"cancel",text:"\u53D6\u6D88",className:"dialog-cancel"},{key:"confirm",text:"\u786E\u8BA4",className:"dialog-confirm",async onClick(){var r;(await u.cancelStaff({id:(r=s==null?void 0:s.data)==null?void 0:r.id})).status===200&&l("/manage/employee/list")}}]]})}};return n(le,{loading:X,children:[n("div",{className:`sm:hidden ${ne.customerInfo} pb-[90px] flex flex-col items-center`,children:[c(de,{renderRight:n("div",{className:"flex items-center",children:[c(J,{onClick:()=>d(!0),name:"share",style:{color:"#fff"},className:"w-[18px] h-[18px]"}),((h=s==null?void 0:s.data)==null?void 0:h.type)===1&&n("div",{className:"flex px-3 py-1 ml-4 justify-center items-center bg-[#fff] rounded-xl",children:[c("p",{className:"text-color-[#8c8c8c] text-xs pr-1",children:((N=s==null?void 0:s.data)==null?void 0:N.online)===1?"\u4E0A\u7EBF":"\u4E0B\u7EBF"}),c("span",{className:`${((y=s==null?void 0:s.data)==null?void 0:y.online)===1?"bg-[#2A4948]":"bg-[#970D0D]"} p-1 rounded-full`})]})]}),leftIconColor:"#fff",bg:"transparent"}),n("div",{className:`${ne.customerHeader} h-80 flex items-center flex-col`,children:[c(re,{className:"z-10 mt-20",name:(F=s==null?void 0:s.data)==null?void 0:F.nickname,headurl:(E=s==null?void 0:s.data)==null?void 0:E.head}),c("p",{className:"pt-4 z-10 font-600 text-color-[#fff]",children:(A=s==null?void 0:s.data)==null?void 0:A.nickname}),n("div",{className:"flex z-10 items-center justify-center text-color-[#fff]",children:[n("p",{className:"text-xs",children:["\u7EFC\u5408\u8BC4\u5206\uFF1A",(v=s==null?void 0:s.data)==null?void 0:v.synthesis_score]}),n("p",{className:"text-xs ml-2",children:[(b=s==null?void 0:s.data)==null?void 0:b.score_num,"\u4EBA\u8BC4\u5206"]})]})]}),n("div",{className:"shadow-sm flex justify-center py-4 w-[70%] -m-14 bg-[#fff] rounded-lg z-20",children:[n("div",{className:"flex flex-col items-center w-[50%] border-r",children:[c("p",{className:"text-xs",children:"\u5B8C\u6210\u9884\u7EA6\u6570"}),c("p",{className:"text-2xl font-600",children:(g=s==null?void 0:s.data)==null?void 0:g.order_num})]}),n("div",{className:"flex flex-col items-center w-[50%]",children:[c("p",{className:"text-xs",children:"\u5173\u6CE8\u4EBA\u6570"}),c("p",{className:"text-2xl font-600",children:(k=s==null?void 0:s.data)==null?void 0:k.fans_num})]})]}),n("div",{className:"shadow-sm flex flex-col px-8 py-8 mb-4 w-[70%] mt-20 bg-[#fff] rounded-lg",children:[n("div",{className:"flex flex-col",children:[c("p",{className:"text-xs",children:"\u90AE\u7BB1"}),c("p",{className:"text-xs font-600",children:(C=s==null?void 0:s.data)==null?void 0:C.email})]}),n("div",{className:"flex flex-col pt-4",children:[c("p",{className:"text-xs",children:"\u624B\u673A\u53F7\u7801"}),c("p",{className:"text-xs font-600",children:(B=s==null?void 0:s.data)==null?void 0:B.phone})]})]}),n("div",{className:"shadow-sm flex flex-col px-8 py-8 mb-4 w-[70%] mt-2 bg-[#fff] rounded-lg",children:[n("div",{className:"flex items-center",children:[c("p",{className:"border-r text-xs pr-4",children:"\u5458\u5DE5\u6210\u672C"}),((D=s==null?void 0:s.data)==null?void 0:D.cost_type)===1&&n("p",{className:"text-sm pl-4 font-600",children:[(w=s==null?void 0:s.data)==null?void 0:w.cost,"%"]})]}),((_=s==null?void 0:s.data)==null?void 0:_.cost_type)===2&&n("div",{className:"text-xs pt-2 font-600",children:[c("div",{className:"flex items-center",children:(($=(S=s==null?void 0:s.data)==null?void 0:S.cost)==null?void 0:$.eat_in)&&n(Z,{children:[c("p",{children:"\u5802\u98DF\uFF1A"}),c("div",{className:"flex",children:(H=(I=(j=s==null?void 0:s.data)==null?void 0:j.cost)==null?void 0:I.eat_in)==null?void 0:H.map((t,r)=>n("span",{children:[t.time,"min\uFF1A$",t==null?void 0:t.price,"\xA0"]},r))})]})}),((z=(O=s==null?void 0:s.data)==null?void 0:O.cost)==null?void 0:z.take_out)&&n("div",{children:[c("p",{children:"\u5916\u5356\uFF1A"}),c("div",{className:"flex",children:(V=(R=(P=s==null?void 0:s.data)==null?void 0:P.cost)==null?void 0:R.take_out)==null?void 0:V.map((t,r)=>n("span",{children:[t.time,"min\uFF1A$",t==null?void 0:t.price,"\xA0"]},r))})]})]}),((M=s==null?void 0:s.data)==null?void 0:M.introducer_cost)&&n("div",{className:"flex items-center pt-2",children:[c("p",{className:"border-r text-xs pr-4",children:"\u4ECB\u7ECD\u8D39\u7528"}),((T=s==null?void 0:s.data)==null?void 0:T.introducer_type)===1&&n("p",{className:"text-sm pl-4 font-600",children:[(q=s==null?void 0:s.data)==null?void 0:q.introducer_cost,"%"]})]}),((G=s==null?void 0:s.data)==null?void 0:G.introducer_type)===2&&c("div",{className:"text-xs pt-2 font-600",children:c("p",{className:"\r flex items-center",children:(a=(L=s==null?void 0:s.data)==null?void 0:L.introducer_cost)==null?void 0:a.map((t,r)=>n("span",{children:[t.time,"min\uFF1A$",t==null?void 0:t.price,"\u3001"]},r))})})]}),n("div",{className:"fixed-b-btn flex",children:[c(Y,{className:"w-[12%] flex items-center justify-center mr-4 h-[2.75rem] rounded-xl border-0 bg-[#F3F3F3]",block:!0,onClick:()=>e(!0),children:c(J,{name:"point",className:"w-[15px] h-[3px]"})}),c(Y,{onClick:()=>{var t;return l("/manage/add/employee/information",{state:{id:(t=s==null?void 0:s.data)==null?void 0:t.id}})},className:" bg-[#F3F3F3]  w-[56%] h-[2.75rem] rounded-xl",block:!0,type:"submit",loadingIcon:c(Z,{}),children:n("div",{className:"flex items-center justify-center",children:[c(J,{name:"edit",className:"w-[18px] h-[18px]"}),c("p",{className:"ml-2",children:"\u7F16\u8F91\u8D44\u6599"})]})})]}),c(me,{actions:((o=s==null?void 0:s.data)==null?void 0:o.type)===1?[{text:((ee=s==null?void 0:s.data)==null?void 0:ee.online)===1?"\u4E0B\u7EBF":"\u4E0A\u7EBF",key:"offline",async onClick(){var r;e(!1);const t=await u.staffOnline({id:(r=s==null?void 0:s.data)==null?void 0:r.id});t.status===200&&(ie.show(t.msg),x())}},Q,{text:"\u67E5\u770B\u9884\u7EA6\u65E5\u5386",key:"copy",onClick(){l("/calendar")}}]:[Q,{text:"\u67E5\u770B\u9884\u7EA6\u65E5\u5386",key:"copy",onClick(){l("/calendar")}}],visible:m,setVisible:e}),c(Ne,{visibleShare:i,setVisibleShare:d,id:(se=s==null?void 0:s.data)==null?void 0:se.id})]}),c(ye,{detail:s,isExclusive:K,refresh:x})]})};export{je as default};
