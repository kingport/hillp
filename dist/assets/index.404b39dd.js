import{u as _,k as j,j as s,b as e,$ as z,S as H,O,aG as $,r as M,i as R,B as v,F as E,T,aF as V}from"./index.5670e6e0.js";import{A as q}from"./index.ce6214e9.js";import{S}from"./Skeleton.c599669d.js";import{H as G}from"./index.04556cd2.js";import{H as L}from"./index.9fe94518.js";import{M as g}from"./manage.653bb3f0.js";import{D as P}from"./dropdown.706ec38f.js";/* empty css                    *//* empty css                 */import"./index.c6660251.js";import"./PurePanel.2a417db7.js";import"./index.42a6e0fb.js";import"./index.92e459fd.js";import"./collapse.e34cf270.js";import"./useFlexGapSupport.172cfcf4.js";const J="_customerInfo_1g3nr_1",K="_customerHeader_1g3nr_7",D={customerInfo:J,customerHeader:K},Q=F=>{var N,i,u,o,m,n,x,p;const{clienInfo:a,refresh:r}=F,l=_(),{runAsync:b}=j(()=>{var d;return g.deleteClient({id:(d=a==null?void 0:a.data)==null?void 0:d.id})},{manual:!0,onSuccess(){l("/manage/customer/list")}}),f=()=>{$.show({content:e("div",{className:"font-600 text-center pb-2 text-xl",children:"\u786E\u5B9A\u8981\u5220\u9664\u5BA2\u6237"}),closeOnAction:!0,actions:[[{key:"cancel",text:"\u53D6\u6D88",className:"dialog-cancel"},{key:"confirm",text:"\u786E\u8BA4",className:"dialog-confirm",async onClick(){b()}}]]})},t=[{key:"1",label:e("span",{onClick:()=>l("/manage/add/customer",{state:{type:"edit",formData:a==null?void 0:a.data}}),children:"\u7F16\u8F91\u8D44\u6599"})},{key:"2",label:e("span",{onClick:()=>{var d;return l("/calendar/add/order",{state:{customerId:(d=a==null?void 0:a.data)==null?void 0:d.id}})},children:"\u6DFB\u52A0\u9884\u7EA6"})},{key:"3",label:e("span",{onClick:f,children:"\u5220\u9664\u5BA2\u6237"})}];return s("div",{className:"flex flex-col w-550px h-full justify-center <sm:hidden",children:[s(S,{loading:!a,active:!0,children:[s("div",{className:"flex w-full justify-between",children:[s("div",{className:"flex items-center",children:[e("div",{className:"border border-solid flex justify-center items-center border-color-[#cee2ee] border-width-1px w-120px h-120px rounded-full",children:e(z,{name:(N=a==null?void 0:a.data)==null?void 0:N.nickname,headurl:(i=a==null?void 0:a.data)==null?void 0:i.head,sx:{width:106,height:106}})}),s("div",{className:"flex flex-col pl-8",children:[e("p",{className:"font-600 text-lg",children:(u=a==null?void 0:a.data)==null?void 0:u.nickname}),s("span",{className:"text-color-[#ACACAC] pt-1 pb-1 text-xs",children:["\u5B8C\u6210\u9884\u7EA6\u6570\uFF1A",(o=a==null?void 0:a.data)==null?void 0:o.order_num]}),e("a",{onClick:()=>l("/calendar"),className:"bg-[#e6f0ef] rounded-md text-xs p-1 text-color-[#2A4948]",children:"\u67E5\u770B\u9884\u7EA6\u65E5\u5386"})]})]}),e(P,{menu:{items:t},placement:"bottom",children:e(H,{name:"point",className:"w-[18px] h-[10px] cursor-pointer"})})]}),s("div",{className:"flex justify-between pt-12",children:[e("div",{className:"flex flex-col w-[48%]",children:s("div",{className:"flex flex-col rounded-2xl bg-[#f6f8f8] py-4 px-7",children:[s("div",{className:"flex text-xs items-center",children:[e("span",{className:"font-600 text-color-[#3F3F3F]",children:"\u5BA2\u6237\u90AE\u7BB1\uFF1A"}),e("span",{className:"underline cursor-pointer text-color-[#3F3F3F]",children:(m=a==null?void 0:a.data)==null?void 0:m.email})]}),s("div",{className:"flex text-xs items-center pt-1",children:[e("span",{className:"font-600 text-color-[#3F3F3F]",children:"\u5BA2\u6237\u624B\u673A\uFF1A"}),e("span",{className:"text-color-[#3F3F3F]",children:(n=a==null?void 0:a.data)==null?void 0:n.phone})]})]})}),e("div",{className:"flex w-[48%] relative flex-col rounded-2xl bg-[#f6f8f8] text-color-[#3F3F3F] text-xs",children:s("div",{className:"flex flex-col rounded-2xl bg-[#f6f8f8] py-4 px-7",children:[s("div",{className:"flex text-xs",children:[e("span",{className:"font-600 text-color-[#3F3F3F] min-w-10",children:"\u5730\u5740\uFF1A"}),e("span",{className:"underline cursor-pointer text-color-[#3F3F3F]",children:(x=a==null?void 0:a.data)==null?void 0:x.address})]}),s("div",{className:"flex text-xs pt-1",children:[e("span",{className:"font-600 text-color-[#3F3F3F] min-w-10",children:"\u5907\u6CE8\uFF1A"}),e("span",{className:"text-color-[#3F3F3F]",children:(p=a==null?void 0:a.data)==null?void 0:p.remark})]})]})})]}),s("div",{className:"flex absolute bottom-6 right-20",children:[e("div",{onClick:f,className:" bg-[#F3F3F3] rounded-3xl text-xs font-500 cursor-pointer hover:opacity-70 px-2 py-1",children:"\u5220\u9664\u5BA2\u6237"}),e("div",{onClick:()=>{var d;l("/calendar/add/order",{state:{customerId:(d=a==null?void 0:a.data)==null?void 0:d.id}})},className:"ml-3 bg-[#2A4948] text-color-[#fff] rounded-3xl text-xs font-500 cursor-pointer hover:opacity-70 px-2 py-1",children:"\u6DFB\u52A0\u9884\u7EA6"})]})]}),e("div",{onClick:()=>l(-1),className:"fixed top-80px right-40px",children:e(O,{fontSize:24,className:"cursor-pointer"})})]})},ue=()=>{var i,u,o,m,n,x,p,d,A,y,C,k;const[F,a]=M.exports.useState(!1),r=R(),l=_(),b=(i=r==null?void 0:r.state)==null?void 0:i.from,f=async()=>{var c,h,w,B;return(c=r==null?void 0:r.state)!=null&&c.source?await V.getClientInfo({client_id:(w=r==null?void 0:r.state)==null?void 0:w.id,source:(B=r==null?void 0:r.state)==null?void 0:B.source}):await g.getClientDetail({id:(h=r==null?void 0:r.state)==null?void 0:h.id})},{data:t,loading:N}=j(f);return s("div",{className:`${D.customerInfo} pb-[90px] flex flex-col items-center`,children:[s(S,{loading:N,children:[e(G,{leftIconColor:"#fff",renderRight:!1,bg:"transparent"}),s("div",{className:`${D.customerHeader} h-70 flex items-center flex-col sm:hidden`,children:[e(q,{className:"z-10 mt-20",src:(u=t==null?void 0:t.data)==null?void 0:u.head,style:{"--border-radius":"50%","--size":"76px"}}),e("p",{className:"pt-4 z-10 font-600 text-color-[#fff]",children:(o=t==null?void 0:t.data)==null?void 0:o.nickname})]}),s("div",{className:"shadow-sm flex justify-center py-4 w-[70%] -m-14 bg-[#fff] rounded-lg z-20 sm:hidden",children:[s("div",{className:"flex flex-col items-center w-[50%] border-r",children:[e("p",{className:"text-xs",children:"\u8BC4\u5206"}),e("p",{className:"text-2xl font-600",children:((m=t==null?void 0:t.data)==null?void 0:m.synthesis_score)||((n=t==null?void 0:t.data)==null?void 0:n.score)})]}),s("div",{className:"flex flex-col items-center w-[50%]",children:[e("p",{className:"text-xs",children:"\u7EBF\u4E0A\u9884\u7EA6\u6570"}),e("p",{className:"text-2xl font-600",children:((x=t==null?void 0:t.data)==null?void 0:x.order_num)||((p=t==null?void 0:t.data)==null?void 0:p.subscribe_num)})]})]}),s("div",{className:"shadow-sm flex flex-col px-8 py-8 mb-4 w-[70%] mt-20 bg-[#fff] rounded-lg sm:hidden",children:[s("div",{className:"flex flex-col",children:[e("p",{className:"text-xs",children:"\u90AE\u7BB1"}),e("p",{className:"text-xs font-600",children:((d=t==null?void 0:t.data)==null?void 0:d.email)||"--"})]}),s("div",{className:"flex flex-col pt-4",children:[e("p",{className:"text-xs",children:"\u624B\u673A\u53F7\u7801"}),e("p",{className:"text-xs font-600",children:((A=t==null?void 0:t.data)==null?void 0:A.phone)||"--"})]}),s("div",{className:"flex flex-col pt-4",children:[e("p",{className:"text-xs",children:"\u5730\u5740"}),e("p",{className:"text-xs font-600",children:((y=t==null?void 0:t.data)==null?void 0:y.address)||"--"})]}),s("div",{className:"flex flex-col pt-4",children:[e("p",{className:"text-xs",children:"\u5907\u6CE8"}),e("p",{className:"text-xs font-600",children:((C=t==null?void 0:t.data)==null?void 0:C.remark)||"--"})]})]}),b==="calendarView"?e("div",{className:"fixed-b-btn flex sm:hidden",children:e(v,{className:"w-[56%] h-[2.75rem] rounded-xl bg-[#F3F3F3]",block:!0,onClick:()=>{l(-1)},children:"\u8FD4\u56DE"})}):((k=r==null?void 0:r.state)==null?void 0:k.type)==="onlineCustomer"?e(E,{children:" "}):s("div",{className:"fixed-b-btn flex sm:hidden",children:[e(v,{className:"w-[12%] flex items-center justify-center mr-4 h-[2.75rem] rounded-xl border-0 bg-[#F3F3F3]",block:!0,onClick:()=>a(!0),children:e(H,{name:"point",className:"w-[15px] h-[3px]"})}),e(v,{onClick:()=>{var c;l("/calendar/add/order",{state:{customerId:(c=t==null?void 0:t.data)==null?void 0:c.id}})},className:"w-[56%] h-[2.75rem] rounded-xl",block:!0,type:"submit",color:"primary",loadingIcon:e(E,{}),children:"\u6DFB\u52A0\u9884\u7EA6"})]})]}),e(L,{actions:[{text:"\u7F16\u8F91\u8D44\u6599",key:"edit",onClick:()=>{l("/manage/add/customer",{state:{type:"edit",formData:t==null?void 0:t.data}})}},{text:"\u5220\u9664\u5BA2\u6237",key:"delete",danger:!0,onClick:async()=>{var h;a(!1);const c=await g.deleteClient({id:(h=t==null?void 0:t.data)==null?void 0:h.id});c.status===200&&T.show({content:c==null?void 0:c.msg,afterClose(){l("/manage/customer/list")}})}}],visible:F,setVisible:a}),e(Q,{clienInfo:t})]})};export{ue as default};
