import{r as c,a0 as i,a as A,Y as P,j as s,b as e,an as _,F as y,S as f,B as R}from"./index.5670e6e0.js";import{C as T}from"./index.4b5b1278.js";import{P as I}from"./index.77a6b2f7.js";import{P as V}from"./index.c6660251.js";import{D as $,s as j}from"./index.module.1ebac123.js";import{D as L}from"./data.6b019071.js";import{H as q}from"./index.04556cd2.js";import{D as z}from"./index.60148415.js";import{D as H,S as U}from"./dropdown.706ec38f.js";import{P as W,F as Z}from"./Pcmenu.e798bd62.js";import{d as D}from"./dayjs.min.37299693.js";import{A as G}from"./ArrowDownOutlined.245c08f2.js";/* empty css                    *//* empty css                 */import"./isoWeek.f8ad8697.js";import"./use-gesture-react.esm.346ddc85.js";import"./rubberband.c88fa690.js";import"./bound.bddb6539.js";import"./PurePanel.2a417db7.js";import"./index.42a6e0fb.js";import"./statusUtils.6dc02607.js";import"./index.92e459fd.js";import"./index.a450b78e.js";import"./collapse.e34cf270.js";import"./useFlexGapSupport.172cfcf4.js";const{RangePicker:J}=z,K=O=>{const F=c.exports.useRef(null),[u,b]=c.exports.useState([]),[M,k]=c.exports.useState([]),[x,C]=c.exports.useState("0"),[l,B]=c.exports.useState([i().add("-6","d").format("YYYY/MM/DD"),i().startOf("day").format("YYYY/MM/DD")]),d=async()=>await L.getDurationDetail({begin_time:i(l[0]).unix(),end_time:i(l[1]).unix()}),w=async()=>{var o,t,a,n;const r=await d();k((t=(o=r==null?void 0:r.data)==null?void 0:o.detail)==null?void 0:t.map((m,p)=>({key:`${p}`,label:p===0?"\u5168\u90E8":m.income}))),b((n=(a=r==null?void 0:r.data)==null?void 0:a.detail)==null?void 0:n.map((m,p)=>({id:`${p}`,...m})))};A(()=>{w()}),P(()=>{w()},[l]);const N=(r,o)=>{const{income:t,amount:a,parent:n,order_num:m}=r;return s("div",{style:{display:"-webkit-box"},className:"flex text-xs mt-2",children:[e("p",{className:"w-[25%] border-l-0 border-r-0 px-2 py-4 border-width-[0.5px] border-color-[#e9e9e9] border-solid",children:t}),e("p",{className:"order-table py-4 w-[25%]",children:m}),s("p",{className:"order-table py-4 w-[25%]",children:[n,"%"]}),e("p",{className:"order-table py-4 w-[25%] text-right",children:a})]},o)},v=async()=>{const r={type:5,file_type:"xlsx",begin_time:i(l[0]).unix(),end_time:i(l[1]).unix()};await $.uploadFile(r)},g=()=>{var r;return s("div",{ref:F,className:"flex flex-col pt-5 overflow-x-auto w-600px",children:[s("div",{style:{display:"-webkit-box"},className:"pl-2 items-center text-xs font-600",children:[e("p",{className:"w-[25%]",children:"\u6536\u6B3E\u65B9\u5F0F"}),e("p",{className:"w-[25%]",children:"\u9884\u7EA6\u6570\u91CF"}),e("p",{className:"w-[25%]",children:"\u767E\u5206\u6BD4"}),e("p",{className:"w-[25%] text-right",children:"\u8425\u4E1A\u989D"})]}),e(y,{children:x!=="0"?(r=u==null?void 0:u.filter(o=>(o==null?void 0:o.id)===x))==null?void 0:r.map((o,t)=>N(o,t)):u==null?void 0:u.map((o,t)=>N(o,t))})]})},S={items:M,onClick:r=>{r.key&&C(r.key)}};return s("div",{className:"flex w-[calc(100vw-60px)] min-h-[calc(100vh-60px)]",children:[e("div",{className:"w-165px border-color-[#000] border-opacity-20 pt-10 border border-solid border-l-0 border-t-0 border-b-0",children:e(W,{})}),s("div",{className:"flex flex-col flex-1  items-center pt-20",children:[s("div",{className:"flex w-full justify-between items-center w-600px",children:[e("p",{className:"font-600 text-2xl",children:"\u65F6\u957F"}),e(_,{onClick:v,style:{display:"flex",alignItems:"center"},type:"primary",icon:e(G,{}),children:"\u5BFC\u51FA"})]}),e("div",{className:"w-600px bg-[#f6f6f6] flex justify-end py-5 rounded-md my-4",children:s("div",{className:"flex items-center justify-end",children:[e(J,{style:{minWidth:160},className:"!bg-[#fff] rounded-2xl",value:[D(l[0]),D(l[1])],placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],onChange:r=>{r&&B([D(r[0]).format("YYYY/MM/DD"),D(r[1]).format("YYYY/MM/DD")])}}),e(H,{menu:S,children:e(_,{type:"primary",className:"mx-4",children:s(U,{children:["\u7B5B\u9009",e(Z,{})]})})})]})}),g()]})]})},Ye=O=>{const F=c.exports.useRef(null),[u,b]=c.exports.useState(!1),[M,k]=c.exports.useState([]),[x,C]=c.exports.useState("0"),[l,B]=c.exports.useState([]),[d,w]=c.exports.useState([i().add("-6","d").format("YYYY/MM/DD"),i().startOf("day").format("YYYY/MM/DD")]),N=async()=>await L.getDurationDetail({begin_time:i(d[0]).unix(),end_time:i(d[1]).unix()}),v=async()=>{var a,n,m,p;const t=await N();k((n=(a=t==null?void 0:t.data)==null?void 0:a.detail)==null?void 0:n.map((h,Y)=>({value:`${Y}`,label:Y===0?"\u5168\u90E8":h.income}))),B((p=(m=t==null?void 0:t.data)==null?void 0:m.detail)==null?void 0:p.map((h,Y)=>({id:`${Y}`,...h})))};A(()=>{v()}),P(()=>{v()},[d]);const g=(t,a)=>{const{income:n,amount:m,parent:p,order_num:h}=t;return s("div",{style:{display:"-webkit-box"},className:"flex text-xs mt-2",children:[e("p",{className:"w-[25%] rounded-l-lg border-r-0 px-2 py-2 border-width-[0.5px] border-color-[#e9e9e9] border-solid",children:n}),e("p",{className:"order-table w-[25%]",children:h}),s("p",{className:"order-table w-[25%]",children:[p,"%"]}),e("p",{className:"order-table w-[25%] text-right",children:m})]},a)},E=async()=>{const t={type:5,file_type:"xlsx",begin_time:i(d[0]).unix(),end_time:i(d[1]).unix()};await $.uploadFile(t)},S=()=>{var t;return s("div",{ref:F,className:"flex flex-col pt-5 overflow-x-auto",children:[s("div",{style:{display:"-webkit-box"},className:"pl-2 items-center text-xs font-600",children:[e("p",{className:"w-[25%]",children:"\u6536\u6B3E\u65B9\u5F0F"}),e("p",{className:"w-[25%]",children:"\u9884\u7EA6\u6570\u91CF"}),e("p",{className:"w-[25%]",children:"\u767E\u5206\u6BD4"}),e("p",{className:"w-[25%] text-right",children:"\u8425\u4E1A\u989D"})]}),e(y,{children:x!=="0"?(t=l==null?void 0:l.filter(a=>(a==null?void 0:a.id)===x))==null?void 0:t.map((a,n)=>g(a,n)):l==null?void 0:l.map((a,n)=>g(a,n))})]})},r=()=>e("div",{onClick:o,className:"flex items-center ",children:e(f,{name:"filter",className:"w-[15px] h-[15px] mr-1"})}),o=async()=>{const t=await I.prompt({columns:[M],defaultValue:[x]});t&&C(t[0])};return s(y,{children:[s("div",{className:"flex flex-col items-center pt-[48px] pb-[90px] w-full sm:hidden",children:[e(q,{renderRight:e(r,{}),title:"\u65F6\u957F"}),s("div",{className:`flex flex-col w-[90%] mt-4 ${j.order}`,children:[s("div",{onClick:()=>b(!0),className:"flex rounded-lg px-3 py-1.5 items-center w-full justify-between my-4 bg-[#f4f6f6] border border-width-[0.5px] border-solid border-color-[#e1e5e5]",children:[e(f,{name:"verify-right",className:"w-[6px] h-[12px] transform rotate-z-180"}),e("p",{className:"text-xs",children:`${d[0]}-${d[1]}`}),e(f,{name:"verify-right",className:"w-[6px] h-[12px]"})]}),S(),e("div",{className:"fixed-b-btn flex",children:s("div",{onClick:E,className:"flex w-[70%] rounded-3xl py-1 px-8 bg-[#2A4948] justify-center items-center text-color-[#fff]",children:[e(R,{className:"text-color-[#fff]",fill:"none",children:"\u5BFC\u51FA"}),e(f,{name:"user-left",style:{transform:"rotateZ(90deg"},className:"w-[10px] h-[10px]"})]})}),e(V,{visible:u,onMaskClick:()=>b(!1),bodyStyle:{height:"auto"},children:e(T,{value:d,className:j.calendarCustom,selectionMode:"range",nextYearButton:e(y,{}),prevYearButton:e(y,{}),nextMonthButton:e("div",{className:"flex justify-center items-center rounded-lg py-1 px-3 border border-solid border-color-[#ccc]",children:e(f,{name:"verify-right",className:"w-[8px] h-[12px] !transform !rotate-0"})}),prevMonthButton:e("div",{className:"flex justify-center items-center rounded-lg py-1 px-3 border border-solid border-color-[#ccc]",children:e(f,{name:"verify-right",className:"w-[8px] h-[12px] transform rotate-z-180"})}),weekStartsOn:"Monday",onChange:t=>{w([i(t[0]).format("YYYY/MM/DD"),i(t[1]).format("YYYY/MM/DD")])}})})]})]}),e("div",{className:"<sm:hidden",children:e(K,{})})]})};export{Ye as default};
