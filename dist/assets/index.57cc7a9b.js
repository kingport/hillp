import{b as n,j as a,r as d,u as H,s as L,a as j,Y as $,S as b,F as O,cw as I,b$ as q,B as C,$ as U,a0 as p}from"./index.5670e6e0.js";import{S as z}from"./Skeleton.c599669d.js";import{N as G,H as J}from"./index.04556cd2.js";import{M as V}from"./manage.653bb3f0.js";/* empty css                    *//* empty css                 */var F=function(i,l){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,e){s.__proto__=e}||function(s,e){for(var o in e)e.hasOwnProperty(o)&&(s[o]=e[o])},F(i,l)};function K(i,l){F(i,l);function s(){this.constructor=i}i.prototype=l===null?Object.create(l):(s.prototype=l.prototype,new s)}var T=function(){return T=Object.assign||function(l){for(var s,e=1,o=arguments.length;e<o;e++){s=arguments[e];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(l[c]=s[c])}return l},T.apply(this,arguments)};function Q(i,l,s,e){var o,c=!1,h=0;function g(){o&&clearTimeout(o)}function f(){g(),c=!0}typeof l!="boolean"&&(e=s,s=l,l=void 0);function x(){var m=this,w=Date.now()-h,y=arguments;if(c)return;function v(){h=Date.now(),s.apply(m,y)}function E(){o=void 0}e&&!o&&v(),g(),e===void 0&&w>i?v():l!==!0&&(o=setTimeout(e?E:v,e===void 0?i-w:i))}return x.cancel=f,x}var N={Pixel:"Pixel",Percent:"Percent"},k={unit:N.Percent,value:.8};function P(i){return typeof i=="number"?{unit:N.Percent,value:i*100}:typeof i=="string"?i.match(/^(\d*(\.\d+)?)px$/)?{unit:N.Pixel,value:parseFloat(i)}:i.match(/^(\d*(\.\d+)?)%$/)?{unit:N.Percent,value:parseFloat(i)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),k):(console.warn("scrollThreshold should be string or number"),k)}var W=function(i){K(l,i);function l(s){var e=i.call(this,s)||this;return e.lastScrollTop=0,e.actionTriggered=!1,e.startY=0,e.currentY=0,e.dragging=!1,e.maxPullDownDistance=0,e.getScrollableTarget=function(){return e.props.scrollableTarget instanceof HTMLElement?e.props.scrollableTarget:typeof e.props.scrollableTarget=="string"?document.getElementById(e.props.scrollableTarget):(e.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},e.onStart=function(o){e.lastScrollTop||(e.dragging=!0,o instanceof MouseEvent?e.startY=o.pageY:o instanceof TouchEvent&&(e.startY=o.touches[0].pageY),e.currentY=e.startY,e._infScroll&&(e._infScroll.style.willChange="transform",e._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},e.onMove=function(o){!e.dragging||(o instanceof MouseEvent?e.currentY=o.pageY:o instanceof TouchEvent&&(e.currentY=o.touches[0].pageY),!(e.currentY<e.startY)&&(e.currentY-e.startY>=Number(e.props.pullDownToRefreshThreshold)&&e.setState({pullToRefreshThresholdBreached:!0}),!(e.currentY-e.startY>e.maxPullDownDistance*1.5)&&e._infScroll&&(e._infScroll.style.overflow="visible",e._infScroll.style.transform="translate3d(0px, "+(e.currentY-e.startY)+"px, 0px)")))},e.onEnd=function(){e.startY=0,e.currentY=0,e.dragging=!1,e.state.pullToRefreshThresholdBreached&&(e.props.refreshFunction&&e.props.refreshFunction(),e.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){e._infScroll&&(e._infScroll.style.overflow="auto",e._infScroll.style.transform="none",e._infScroll.style.willChange="unset")})},e.onScrollListener=function(o){typeof e.props.onScroll=="function"&&setTimeout(function(){return e.props.onScroll&&e.props.onScroll(o)},0);var c=e.props.height||e._scrollableNode?o.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!e.actionTriggered){var h=e.props.inverse?e.isElementAtTop(c,e.props.scrollThreshold):e.isElementAtBottom(c,e.props.scrollThreshold);h&&e.props.hasMore&&(e.actionTriggered=!0,e.setState({showLoader:!0}),e.props.next&&e.props.next()),e.lastScrollTop=c.scrollTop}},e.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:s.dataLength},e.throttledOnScrollListener=Q(150,e.onScrollListener).bind(e),e.onStart=e.onStart.bind(e),e.onMove=e.onMove.bind(e),e.onEnd=e.onEnd.bind(e),e}return l.prototype.componentDidMount=function(){if(typeof this.props.dataLength>"u")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},l.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},l.prototype.componentDidUpdate=function(s){this.props.dataLength!==s.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},l.getDerivedStateFromProps=function(s,e){var o=s.dataLength!==e.prevDataLength;return o?T(T({},e),{prevDataLength:s.dataLength}):null},l.prototype.isElementAtTop=function(s,e){e===void 0&&(e=.8);var o=s===document.body||s===document.documentElement?window.screen.availHeight:s.clientHeight,c=P(e);return c.unit===N.Pixel?s.scrollTop<=c.value+o-s.scrollHeight+1:s.scrollTop<=c.value/100+o-s.scrollHeight+1},l.prototype.isElementAtBottom=function(s,e){e===void 0&&(e=.8);var o=s===document.body||s===document.documentElement?window.screen.availHeight:s.clientHeight,c=P(e);return c.unit===N.Pixel?s.scrollTop+o>=s.scrollHeight-c.value:s.scrollTop+o>=c.value/100*s.scrollHeight},l.prototype.render=function(){var s=this,e=T({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),o=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),c=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return n("div",{style:c,className:"infinite-scroll-component__outerdiv",children:a("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(h){return s._infScroll=h},style:e,children:[this.props.pullDownToRefresh&&n("div",{style:{position:"relative"},ref:function(h){return s._pullDown=h},children:n("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance},children:this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent})}),this.props.children,!this.state.showLoader&&!o&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage]})})},l}(d.exports.Component);const X="_informationCard_1vkx3_5",R={informationCard:X},Z=()=>{const i=H(),l=L.getState().global.userInfo,{region:s}=L.getState().global.areaRegion,[e,o]=d.exports.useState(0),[c,h]=d.exports.useState(1),[g,f]=d.exports.useState(!1),[x,m]=d.exports.useState([]),[w,y]=d.exports.useState(!1),[v,E]=d.exports.useState(!0),Y=async()=>await V.squareList({page:c,region:e}),S=async()=>{if(w)return;const t=await Y();h(u=>u+1),m(u=>{var D;return[...u,...(D=t==null?void 0:t.data)==null?void 0:D.data]}),y(!1),E(t.data.data.length>0)};j(()=>{var t;o((t=s==null?void 0:s.find(u=>u.value===(l==null?void 0:l.region_id)*1))==null?void 0:t.value)});const _=()=>{var t;return e===0?"\u5168\u90E8":(t=s==null?void 0:s.find(u=>u.value===e*1))==null?void 0:t.label},A=t=>{const u=p(p().format("YYYY-MM-DD")).diff(p(p(t*1e3).format("YYYY-MM-DD"))),D=p.duration(u).asDays();return D===0?"\u4ECA\u5929":`${D}\u5929\u524D`},M=(t,u)=>a("div",{className:`inline-flex w-400px flex-col p-6 rounded-lg bg-[#fff] ml-[8px] mr-[8px] mt-[16px] ${R.informationCard}`,children:[a("div",{className:"flex justify-between",children:[a("div",{className:"flex items-center",children:[n(U,{name:t==null?void 0:t.nickname,sx:{width:34,height:34},headurl:t==null?void 0:t.head}),a("div",{className:"ml-2",children:[n("p",{className:"text-xs text-color-[#000] font-600",children:t==null?void 0:t.nickname}),n("p",{className:"text-xs text-color-[#999]",children:t==null?void 0:t.address})]})]}),n("div",{className:"text-xs w-15 text-color-[#ABABAB]",children:A(t.time)})]}),a("div",{className:"flex items-center pt-6 pl-10",children:[a("div",{className:"flex flex-col pr-4",children:[n("p",{className:"text-xs text-color-[#292929]",children:"\u5E74\u9F84"}),n("p",{className:"text-sm text-color-[#292929] font-600",children:`${(t==null?void 0:t.age)||"-"}\u5C81`})]}),a("div",{className:"flex flex-col pr-4 ",children:[n("p",{className:"text-xs text-color-[#292929]",children:"\u4F53\u91CD"}),n("p",{className:"text-sm text-color-[#292929] font-600",children:`${(t==null?void 0:t.weight)||"-"}kg`})]}),a("div",{className:"flex flex-col pr-4",children:[n("p",{className:"text-xs text-color-[#292929]",children:"\u8EAB\u9AD8"}),n("p",{className:"text-sm text-color-[#292929] font-600",children:(t==null?void 0:t.height)||"--"})]}),a("div",{className:"flex flex-col pr-4",children:[n("p",{className:"text-xs text-color-[#292929]",children:"\u80F8\u56F4"}),n("p",{className:"text-sm text-color-[#292929] font-600",children:(t==null?void 0:t.chest)||"--"})]})]}),n(C,{onClick:()=>i("/manage/employee/information/mall/detail",{state:{id:t==null?void 0:t.id}}),className:"w-[40%] mt-6 ml-10",size:"mini",color:"primary",shape:"rounded",children:n("span",{className:"text-xs",children:"\u67E5\u770B\u8BE6\u60C5"})})]},u),B=t=>{o(t.value)};$(()=>{S()},[e]);const r=n(b,{style:{color:"",width:"20px",height:"48px"},name:"nav-left"});return a("div",{className:"flex w-100vw flex-col justify-center items-center min-h-[calc(100vh-60px)] bg-[#f9f9fa]",children:[n(G,{style:{"--height":"48px",fontSize:"12px",width:832},left:a("div",{onClick:()=>i(-1),className:`${R.pcLeft} cursor-pointer flex items-center justify-start text-sm`,children:[r,n("span",{className:"pl-2",children:"\u8FD4\u56DE"})]}),right:a("div",{onClick:()=>f(!0),className:"flex justify-end cursor-pointer item-center",children:[n(b,{name:"location",className:"w-[11px] h-[15px]"}),n("p",{className:"ml-1 text-xs font-500",children:_()})]}),backArrow:n(O,{}),children:n("span",{className:"flex text-sm items-center justify-center",children:"\u4FE1\u606F\u5E7F\u573A"})}),n("div",{id:"scrollableDiv",style:{height:"90vh",overflow:"auto",padding:"0 16px"},children:n(W,{dataLength:x.length,next:S,hasMore:v,loader:n(z,{avatar:!0,paragraph:{rows:1},active:!0}),endMessage:n(I,{plain:!0,children:"\u6CA1\u6709\u66F4\u591A\u4E86 \u{1F910}"}),scrollableTarget:"scrollableDiv",className:"flex flex-wrap",style:{maxWidth:"832px"},children:x.map((t,u)=>M(t,u))})}),n(q,{visible:g,onClose:()=>f(!1),style:{"--min-width":"20rem"},showCloseButton:!0,children:a("div",{className:"flex p-4 flex-col justify-center items-center",children:[n("p",{className:"font-500",children:"\u8BF7\u9009\u62E9\u60A8\u7684\u6240\u5728\u5730\u533A"}),[{value:0,label:"\u5168\u90E8"},...s].map(t=>a("div",{onClick:()=>{B(t),h(1),m([])},className:"flex pt-5 items-center ",children:[n("p",{children:t==null?void 0:t.label}),n(b,{name:"checked",className:`${e===t.value?"opacity-100":"opacity-0"} w-[10px] h-[6px] ml-4`})]},t.value)),n(C,{onClick:()=>f(!1),color:"primary",className:"w-[90%] mt-6",shape:"rounded",children:"\u786E\u8BA4"})]})})]})},le=()=>{const i=H(),l=L.getState().global.userInfo,{region:s}=L.getState().global.areaRegion,[e,o]=d.exports.useState(0),[c,h]=d.exports.useState(1),[g,f]=d.exports.useState(!1),[x,m]=d.exports.useState([]),[w,y]=d.exports.useState(!1),[v,E]=d.exports.useState(!0),Y=async()=>await V.squareList({page:c,region:e}),S=async()=>{if(w)return;const r=await Y();h(t=>t+1),m(t=>{var u;return[...t,...(u=r==null?void 0:r.data)==null?void 0:u.data]}),y(!1),E(r.data.data.length>0)};j(()=>{var r;o((r=s==null?void 0:s.find(t=>t.value===(l==null?void 0:l.region_id)*1))==null?void 0:r.value)});const _=()=>{var r;return e===0?"\u5168\u90E8":(r=s==null?void 0:s.find(t=>t.value===e*1))==null?void 0:r.label},A=r=>{const t=p(p().format("YYYY-MM-DD")).diff(p(p(r*1e3).format("YYYY-MM-DD"))),u=p.duration(t).asDays();return u===0?"\u4ECA\u5929":`${u}\u5929\u524D`},M=(r,t)=>a("div",{className:"flex w-full flex-col p-6 shadow-sm rounded-lg mt-8 bg-[#fff]",children:[a("div",{className:"flex justify-between",children:[a("div",{className:"flex items-center",children:[n(U,{name:r==null?void 0:r.nickname,sx:{width:34,height:34},headurl:r==null?void 0:r.head}),a("div",{className:"ml-2",children:[n("p",{className:"text-xs text-color-[#000] font-600",children:r==null?void 0:r.nickname}),n("p",{className:"text-xs text-color-[#999]",children:r==null?void 0:r.address})]})]}),n("div",{className:"text-xs w-15 text-color-[#ABABAB]",children:A(r.time)})]}),a("div",{className:"flex items-center pt-6 pl-10",children:[a("div",{className:"flex flex-col pr-4",children:[n("p",{className:"text-xs text-color-[#292929]",children:"\u5E74\u9F84"}),n("p",{className:"text-sm text-color-[#292929] font-600",children:`${(r==null?void 0:r.age)||"-"}\u5C81`})]}),a("div",{className:"flex flex-col pr-4 ",children:[n("p",{className:"text-xs text-color-[#292929]",children:"\u4F53\u91CD"}),n("p",{className:"text-sm text-color-[#292929] font-600",children:`${(r==null?void 0:r.weight)||"-"}kg`})]}),a("div",{className:"flex flex-col pr-4",children:[n("p",{className:"text-xs text-color-[#292929]",children:"\u8EAB\u9AD8"}),n("p",{className:"text-sm text-color-[#292929] font-600",children:(r==null?void 0:r.height)||"--"})]}),a("div",{className:"flex flex-col pr-4",children:[n("p",{className:"text-xs text-color-[#292929]",children:"\u80F8\u56F4"}),n("p",{className:"text-sm text-color-[#292929] font-600",children:(r==null?void 0:r.chest)||"--"})]})]}),n(C,{onClick:()=>i("/manage/employee/information/mall/detail",{state:{id:r==null?void 0:r.id}}),className:"w-68px mt-6 ml-10",size:"mini",color:"primary",shape:"rounded",children:n("span",{className:"text-xs",children:"\u67E5\u770B\u8BE6\u60C5"})})]},t),B=r=>{o(r.value)};return $(()=>{S()},[e]),a(O,{children:[a("div",{className:"flex w-full flex-col p-4 items-center min-h-[100vh] bg-[#f9f9fa] pt-[48px] sm:hidden",children:[n(J,{title:"\u4FE1\u606F\u5E7F\u573A",renderRight:a("div",{onClick:()=>f(!0),className:"flex item-center",children:[n(b,{name:"location",className:"w-[11px] h-[15px]"}),n("p",{className:"ml-1 text-xs font-500",children:_()})]})}),n("div",{id:"scrollableDiv",style:{height:"90vh",overflow:"auto",padding:"0 16px",width:"100%"},children:n(W,{dataLength:x.length,next:S,hasMore:v,loader:n(z,{avatar:!0,paragraph:{rows:1},active:!0}),endMessage:n(I,{plain:!0,children:"\u6CA1\u6709\u66F4\u591A\u4E86 \u{1F910}"}),scrollableTarget:"scrollableDiv",children:x.map((r,t)=>M(r,t))})}),n(q,{visible:g,onClose:()=>f(!1),style:{"--min-width":"20rem"},showCloseButton:!0,children:a("div",{className:"flex p-4 flex-col justify-center items-center",children:[n("p",{className:"font-500",children:"\u8BF7\u9009\u62E9\u60A8\u7684\u6240\u5728\u5730\u533A"}),[{value:0,label:"\u5168\u90E8"},...s].map(r=>a("div",{onClick:()=>{B(r),h(1),m([])},className:"flex pt-5 items-center ",children:[n("p",{children:r==null?void 0:r.label}),n(b,{name:"checked",className:`${e===r.value?"opacity-100":"opacity-0"} w-[10px] h-[6px] ml-4`})]},r.value)),n(C,{onClick:()=>f(!1),color:"primary",className:"w-[90%] mt-6",shape:"rounded",children:"\u786E\u8BA4"})]})})]}),n("div",{className:"<sm:hidden",children:n(Z,{})})]})};export{le as default};
