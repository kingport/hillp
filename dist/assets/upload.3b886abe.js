var f=Object.defineProperty;var h=(s,e,t)=>e in s?f(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var p=(s,e,t)=>(h(s,typeof e!="symbol"?e+"":e,t),t);import{cx as d,T as r,a0 as u,cy as c,s as o,cz as x,cA as b,cB as l}from"./index.5670e6e0.js";d.interceptors.response.use(function(s){return s},function(s){return s.globalErrorProcess=function(){var e,t;switch(this.response.status){case 413:r.show(`${(e=s==null?void 0:s.response)==null?void 0:e.status}${(t=s==null?void 0:s.response)==null?void 0:t.statusText}`);break}return Promise.reject(this)},s.globalErrorProcess()});class z{}p(z,"uploadFile",e=>{const t=new FormData;t.append("file",e[0]);const a={};a.channelID=l,a.request_time=u().unix(),a.timezone=c.tz.guess(),a.user_id=o.getState().global.userId;let n=x("/api/file/upload",a);const g=o.getState().global.token;n=n+`&token=${g}`;const i=b.exports(n).toUpperCase();a.sign=i,t.append("sign",i),t.append("user_id",o.getState().global.userId),t.append("request_time",`${u().unix()}`),t.append("channelID",l),t.append("timezone",c.tz.guess());const m="https://apiv1.hiilp.com/api/file/upload";return d.post(m,t,{headers:{"Content-Type":"multipart/form-data"}})});export{z as U};
