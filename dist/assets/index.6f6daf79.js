import{u as A,i as F,r as D,k as y,j as m,b as a,S as w,T as P,U as v}from"./index.5670e6e0.js";import{u as j,P as _,N as k}from"./index.f9bd820a.js";import{u as E}from"./index.5733fb44.js";/* empty css                    *//* empty css                 */import"./dayjs.min.37299693.js";import"./bound.bddb6539.js";import"./index.c6660251.js";const R="_verification_1tpn5_1",T={verification:R},G=()=>{var x,g;const p=A(),e=F(),r=E(document.querySelector("body")),u=((x=e.state)==null?void 0:x.account)==="merchant",c=((g=e.state)==null?void 0:g.account)==="personal",[l,i]=D.exports.useState(),[d]=j({targetDate:l,onEnd:()=>{i(void 0)}}),N=async()=>{var s,o,n;let t;return u&&(t=2),c&&(t=1),await v.getPhoneCode({phone:(s=e==null?void 0:e.state)==null?void 0:s.formData.phone,area_id:(o=e==null?void 0:e.state)==null?void 0:o.formData.area_id,user_type:t,register_code:(n=e==null?void 0:e.state)==null?void 0:n.formData.register_code})},C=async t=>{var n,h;let s;u&&(s=2),c&&(s=1);const o={user_type:s,vcode:t,register_code:(n=e==null?void 0:e.state)==null?void 0:n.formData.register_code,...(h=e==null?void 0:e.state)==null?void 0:h.formData};return await v.registerAccount(o)},{run:B}=y(N,{manual:!0,onSuccess:t=>{P.show({content:t==null?void 0:t.msg,afterClose(){i(Date.now()+6e4)}})}});D.exports.useEffect(()=>{i(Date.now()+6e4)},[]);const{run:b}=y(C,{manual:!0,onSuccess(){var s;let t;u&&(t=2),c&&(t=1),p("/user/register/success",{state:{user_type:t,email:(s=e==null?void 0:e.state)==null?void 0:s.email,formData:e.state.formData,type:e.state.type}})}}),S=()=>{if(l)return!1;B()},f=t=>{b(t)};return m("div",{className:`${T.verification} px-8 py-8`,children:[m("div",{className:"flex items-center justify-between",children:[a(w,{onClick:()=>p(-1),name:"user-left",className:"w-[26px] h-[12px] ml-2"}),a(w,{name:"logo",className:"w-[84px] h-[20px] -ml-[26px]"}),a("div",{})]}),m("div",{className:"shadow-sm bg-[#fff] flex flex-col items-center rounded-md mt-14 py-8 sm:w-500px sm:m-auto sm:mt-100",children:[a("p",{className:"text-center text-color-[#2A4948] text-xl font-600",children:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),a("span",{className:"pb-8 text-xs text-color-[#B0B0B0] pt-2",children:"\u56DB\u4F4D\u6570\u4EE3\u7801\u5DF2\u53D1\u9001\u81F3\u60A8\u7684\u624B\u673A"}),(r==null?void 0:r.width)&&(r==null?void 0:r.width)<=640?a(_,{onFill:f,length:4,seperated:!0,keyboard:a(k,{}),style:{"--cell-gap":"16px"},plain:!0}):a(_,{onFill:f,length:4,seperated:!0,style:{"--cell-gap":"16px"},plain:!0}),a("span",{onClick:S,className:"text-xs text-color-[#2A4948] pt-14 underline",children:d===0?"\u91CD\u65B0\u53D1\u9001":`${Math.round(d/1e3)}s\u91CD\u65B0\u53D1\u9001`})]})]})};export{G as default};
