import{r as d,a0 as o,a as A,Y as P,j as s,b as e,an as j,F as b,S as h,B as O}from"./index.5670e6e0.js";import{C as R}from"./index.4b5b1278.js";import{P as T}from"./index.77a6b2f7.js";import{P as V}from"./index.c6660251.js";import{D as $,s as _}from"./index.module.1ebac123.js";import{D as I}from"./data.6b019071.js";import{H as q}from"./index.04556cd2.js";import{D as z}from"./index.60148415.js";import{D as H,S as U}from"./dropdown.706ec38f.js";import{P as W,F as Z}from"./Pcmenu.e798bd62.js";import{d as D}from"./dayjs.min.37299693.js";import{A as G}from"./ArrowDownOutlined.245c08f2.js";/* empty css                    *//* empty css                 */import"./isoWeek.f8ad8697.js";import"./use-gesture-react.esm.346ddc85.js";import"./rubberband.c88fa690.js";import"./bound.bddb6539.js";import"./PurePanel.2a417db7.js";import"./index.42a6e0fb.js";import"./statusUtils.6dc02607.js";import"./index.92e459fd.js";import"./index.a450b78e.js";import"./collapse.e34cf270.js";import"./useFlexGapSupport.172cfcf4.js";const{RangePicker:J}=z,K=L=>{const M=d.exports.useRef(null),[u,w]=d.exports.useState([]),[x,F]=d.exports.useState([]),[N,k]=d.exports.useState("0"),[n,C]=d.exports.useState([o().add("-6","d").format("YYYY/MM/DD"),o().startOf("day").format("YYYY/MM/DD")]),m=async()=>await I.getIncomeDetail({begin_time:o(n[0]).unix(),end_time:o(n[1]).unix()}),v=async()=>{var l,t,a,i;const r=await m();F((t=(l=r==null?void 0:r.data)==null?void 0:l.detail)==null?void 0:t.map((p,c)=>({key:`${c}`,label:c===0?"\u5168\u90E8":p.income}))),w((i=(a=r==null?void 0:r.data)==null?void 0:a.detail)==null?void 0:i.map((p,c)=>({id:`${c}`,...p})))};A(()=>{v()}),P(()=>{v()},[n]);const g=(r,l)=>{const{income:t,amount:a,deposit:i,parent:p,total:c}=r;return s("div",{style:{display:"-webkit-box"},className:"flex text-xs mt-2",children:[e("p",{className:"w-[20%] border-r-0 border-l-0 px-2 py-4 border-width-[0.5px] border-color-[#e9e9e9] border-solid",children:t}),e("p",{className:"order-table w-[20%] py-4",children:i}),e("p",{className:"order-table w-[20%] py-4",children:a}),s("p",{className:"order-table w-[20%] py-4",children:[p,"%"]}),e("p",{className:"order-table w-[20%] py-4 text-right",children:c})]},l)},Y=async()=>{await $.uploadFile({type:2,file_type:"xlsx",begin_time:o(n[0]).unix(),end_time:o(n[1]).unix()})},B=()=>{var r;return s("div",{ref:M,className:"flex flex-col pt-5 overflow-x-auto w-600px",children:[s("div",{style:{display:"-webkit-box"},className:"pl-2 items-center text-xs font-600",children:[e("p",{className:"w-[20%]",children:"\u6536\u6B3E\u65B9\u5F0F"}),e("p",{className:"w-[20%]",children:"\u5B9A\u91D1"}),e("p",{className:"w-[20%]",children:"\u6536\u6B3E"}),e("p",{className:"w-[20%]",children:"\u767E\u5206\u6BD4"}),e("p",{className:"w-[20%] text-right",children:"\u603B\u6536\u6B3E"})]}),e(b,{children:N!=="0"?(r=u==null?void 0:u.filter(l=>(l==null?void 0:l.id)===N))==null?void 0:r.map((l,t)=>g(l,t)):u==null?void 0:u.map((l,t)=>g(l,t))})]})},S={items:x,onClick:r=>{r.key&&k(r.key)}};return s("div",{className:"flex w-[calc(100vw-60px)] min-h-[calc(100vh-60px)]",children:[e("div",{className:"w-165px border-color-[#000] border-opacity-20 pt-10 border border-solid border-l-0 border-t-0 border-b-0",children:e(W,{})}),s("div",{className:"flex flex-col flex-1  items-center pt-20",children:[s("div",{className:"flex w-full justify-between items-center w-600px",children:[e("p",{className:"font-600 text-2xl",children:"\u6536\u6B3E\u65B9\u5F0F"}),e(j,{onClick:Y,style:{display:"flex",alignItems:"center"},type:"primary",icon:e(G,{}),children:"\u5BFC\u51FA"})]}),e("div",{className:"w-600px bg-[#f6f6f6] flex justify-end py-5 rounded-md my-4",children:s("div",{className:"flex items-center justify-end",children:[e(J,{style:{minWidth:160},className:"!bg-[#fff] rounded-2xl",value:[D(n[0]),D(n[1])],placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],onChange:r=>{r&&C([D(r[0]).format("YYYY/MM/DD"),D(r[1]).format("YYYY/MM/DD")])}}),e(H,{menu:S,children:e(j,{type:"primary",className:"mx-4",children:s(U,{children:["\u7B5B\u9009",e(Z,{})]})})})]})}),B()]})]})},Ye=L=>{const M=d.exports.useRef(null),[u,w]=d.exports.useState(!1),[x,F]=d.exports.useState([]),[N,k]=d.exports.useState([]),[n,C]=d.exports.useState("0"),[m,v]=d.exports.useState([o().add("-6","d").format("YYYY/MM/DD"),o().startOf("day").format("YYYY/MM/DD")]),g=async()=>await I.getIncomeDetail({begin_time:o(m[0]).unix(),end_time:o(m[1]).unix()}),Y=async()=>{var a,i,p,c;const t=await g();k((i=(a=t==null?void 0:t.data)==null?void 0:a.detail)==null?void 0:i.map((y,f)=>({value:`${f}`,label:f===0?"\u5168\u90E8":y.income}))),F((c=(p=t==null?void 0:t.data)==null?void 0:p.detail)==null?void 0:c.map((y,f)=>({id:`${f}`,...y})))};A(()=>{Y()}),P(()=>{Y()},[m]);const B=(t,a)=>{const{income:i,amount:p,deposit:c,parent:y,total:f}=t;return s("div",{style:{display:"-webkit-box"},className:"flex text-xs mt-2",children:[e("p",{className:"w-[20%] rounded-l-lg border-r-0 px-2 py-2 border-width-[0.5px] border-color-[#e9e9e9] border-solid",children:i}),e("p",{className:"order-table w-[20%]",children:c}),e("p",{className:"order-table w-[20%]",children:p}),s("p",{className:"order-table w-[20%]",children:[y,"%"]}),e("p",{className:"order-table w-[20%] text-right",children:f})]},a)},E=async()=>{await $.uploadFile({type:2,file_type:"xlsx",begin_time:o(m[0]).unix(),end_time:o(m[1]).unix()})},S=()=>{var t;return s("div",{ref:M,className:"flex flex-col pt-5 overflow-x-auto",children:[s("div",{style:{display:"-webkit-box"},className:"pl-2 items-center text-xs font-600",children:[e("p",{className:"w-[20%]",children:"\u6536\u6B3E\u65B9\u5F0F"}),e("p",{className:"w-[20%]",children:"\u5B9A\u91D1"}),e("p",{className:"w-[20%]",children:"\u6536\u6B3E"}),e("p",{className:"w-[20%]",children:"\u767E\u5206\u6BD4"}),e("p",{className:"w-[20%] text-right",children:"\u603B\u6536\u6B3E"})]}),e(b,{children:n!=="0"?(t=x==null?void 0:x.filter(a=>(a==null?void 0:a.id)===n))==null?void 0:t.map((a,i)=>B(a,i)):x==null?void 0:x.map((a,i)=>B(a,i))})]})},r=()=>e("div",{onClick:l,className:"flex items-center ",children:e(h,{name:"filter",className:"w-[15px] h-[15px] mr-1"})}),l=async()=>{const t=await T.prompt({columns:[N],defaultValue:[n]});t&&C(t[0])};return s(b,{children:[s("div",{className:"flex flex-col items-center pt-[48px] pb-[90px] w-full sm:hidden",children:[e(q,{renderRight:e(r,{}),title:"\u6536\u6B3E\u65B9\u5F0F"}),s("div",{className:`flex flex-col w-[90%] mt-4 ${_.order}`,children:[s("div",{onClick:()=>w(!0),className:"flex rounded-lg px-3 py-1.5 items-center w-full justify-between my-4 bg-[#f4f6f6] border border-width-[0.5px] border-solid border-color-[#e1e5e5]",children:[e(h,{name:"verify-right",className:"w-[6px] h-[12px] transform rotate-z-180"}),e("p",{className:"text-xs",children:`${m[0]}-${m[1]}`}),e(h,{name:"verify-right",className:"w-[6px] h-[12px]"})]}),S(),e("div",{className:"fixed-b-btn flex",children:s("div",{onClick:E,className:"flex w-[70%] rounded-3xl py-1 px-8 bg-[#2A4948] justify-center items-center text-color-[#fff]",children:[e(O,{className:"text-color-[#fff]",fill:"none",children:"\u5BFC\u51FA"}),e(h,{name:"user-left",style:{transform:"rotateZ(90deg"},className:"w-[10px] h-[10px]"})]})}),e(V,{visible:u,onMaskClick:()=>w(!1),bodyStyle:{height:"auto"},children:e(R,{value:m,className:_.calendarCustom,selectionMode:"range",nextYearButton:e(b,{}),prevYearButton:e(b,{}),nextMonthButton:e("div",{className:"flex justify-center items-center rounded-lg py-1 px-3 border border-solid border-color-[#ccc]",children:e(h,{name:"verify-right",className:"w-[8px] h-[12px] !transform !rotate-0"})}),prevMonthButton:e("div",{className:"flex justify-center items-center rounded-lg py-1 px-3 border border-solid border-color-[#ccc]",children:e(h,{name:"verify-right",className:"w-[8px] h-[12px] transform rotate-z-180"})}),weekStartsOn:"Monday",onChange:t=>{v([o(t[0]).format("YYYY/MM/DD"),o(t[1]).format("YYYY/MM/DD")])}})})]})]}),e("div",{className:"<sm:hidden",children:e(K,{})})]})};export{Ye as default};
