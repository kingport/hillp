import{r as d,a0 as o,a as P,Y as T,j as a,b as e,an as A,F as b,u as S,S as y,B as I}from"./index.5670e6e0.js";import{C as V}from"./index.4b5b1278.js";import{P as q}from"./index.77a6b2f7.js";import{P as z}from"./index.c6660251.js";import{D as $,s as j}from"./index.module.1ebac123.js";import{D as L}from"./data.6b019071.js";import{H}from"./index.04556cd2.js";import{D as U}from"./index.60148415.js";import{D as W,S as Z}from"./dropdown.706ec38f.js";import{P as G,F as J}from"./Pcmenu.e798bd62.js";import{d as C}from"./dayjs.min.37299693.js";import{A as K}from"./ArrowDownOutlined.245c08f2.js";/* empty css                    *//* empty css                 */import"./isoWeek.f8ad8697.js";import"./use-gesture-react.esm.346ddc85.js";import"./rubberband.c88fa690.js";import"./bound.bddb6539.js";import"./PurePanel.2a417db7.js";import"./index.42a6e0fb.js";import"./statusUtils.6dc02607.js";import"./index.92e459fd.js";import"./index.a450b78e.js";import"./collapse.e34cf270.js";import"./useFlexGapSupport.172cfcf4.js";const{RangePicker:Q}=U,X=O=>{const M=d.exports.useRef(null),[f,N]=d.exports.useState([]),[x,F]=d.exports.useState([]),[w,E]=d.exports.useState("0"),[n,k]=d.exports.useState([o().add("-6","d").format("YYYY/MM/DD"),o().startOf("day").format("YYYY/MM/DD")]),m=async()=>await L.getTurnoverDetail({begin_time:o(n[0]).unix(),end_time:o(n[1]).unix()}),v=async()=>{var l,t,s,i;const r=await m();F((t=(l=r==null?void 0:r.data)==null?void 0:l.detail)==null?void 0:t.map((u,c)=>({key:`${c}`,label:c===0?"\u5168\u90E8":u.income}))),N((i=(s=r==null?void 0:r.data)==null?void 0:s.detail)==null?void 0:i.map((u,c)=>({id:`${c}`,...u})))};P(()=>{v()}),T(()=>{v()},[n]);const D=(r,l)=>{const{income:t,amount:s,introducer_amount:i,order_num:u,retained_amount:c,staff_cost:p}=r;return a("div",{style:{display:"-webkit-box"},className:"flex text-xs mt-2",children:[e("p",{className:"w-45 border-l-0 border-r-0 px-2 py-4 border-width-[0.5px] border-color-[#e9e9e9] border-solid",children:t}),e("p",{className:"order-table py-4",children:u}),e("p",{className:"order-table py-4",children:s}),e("p",{className:"order-table py-4",children:p}),e("p",{className:"order-table py-4",children:i}),e("p",{className:"order-table py-4 text-right",children:c})]},l)},g=async()=>{await $.uploadFile({type:1,file_type:"xlsx",begin_time:o(n[0]).unix(),end_time:o(n[1]).unix()})},Y=()=>{var r;return a("div",{ref:M,className:"flex flex-col pt-5 overflow-x-auto w-700px",children:[a("div",{style:{display:"-webkit-box"},className:"pl-2 items-center text-xs font-600",children:[e("p",{className:"w-45",children:"\u6536\u6B3E\u65B9\u5F0F"}),e("p",{className:"w-25",children:"\u9884\u7EA6\u6570\u91CF"}),e("p",{className:"w-25",children:"\u8425\u4E1A\u989D"}),e("p",{className:"w-25",children:"\u5458\u5DE5\u6210\u672C"}),e("p",{className:"w-25",children:"\u4ECB\u7ECD\u4EBA\u63D0\u6210"}),e("p",{className:"w-25 text-right",children:"\u51C0\u8425\u4E1A\u989D"})]}),e(b,{children:w!=="0"?(r=f==null?void 0:f.filter(l=>(l==null?void 0:l.id)===w))==null?void 0:r.map((l,t)=>D(l,t)):f==null?void 0:f.map((l,t)=>D(l,t))})]})},B={items:x,onClick:r=>{r.key&&E(r.key)}};return a("div",{className:"flex w-[calc(100vw-60px)] min-h-[calc(100vh-60px)]",children:[e("div",{className:"w-165px border-color-[#000] border-opacity-20 pt-10 border border-solid border-l-0 border-t-0 border-b-0",children:e(G,{})}),a("div",{className:"flex flex-col flex-1  items-center pt-20",children:[a("div",{className:"flex w-full justify-between items-center w-700px",children:[e("p",{className:"font-600 text-2xl",children:"\u8425\u4E1A\u989D"}),e(A,{onClick:g,style:{display:"flex",alignItems:"center"},type:"primary",icon:e(K,{}),children:"\u5BFC\u51FA"})]}),e("div",{className:"w-700px bg-[#f6f6f6] flex justify-end py-5 rounded-md my-4",children:a("div",{className:"flex items-center justify-end",children:[e(Q,{style:{minWidth:160},className:"!bg-[#fff] rounded-2xl",value:[C(n[0]),C(n[1])],placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],onChange:r=>{r&&k([C(r[0]).format("YYYY/MM/DD"),C(r[1]).format("YYYY/MM/DD")])}}),e(W,{menu:B,children:e(A,{type:"primary",className:"mx-4",children:a(Z,{children:["\u7B5B\u9009",e(J,{})]})})})]})}),Y()]})]})},Ce=O=>{S();const M=d.exports.useRef(null);S();const[f,N]=d.exports.useState(!1),[x,F]=d.exports.useState([]),[w,E]=d.exports.useState([]),[n,k]=d.exports.useState("0"),[m,v]=d.exports.useState([o().add("-6","d").format("YYYY/MM/DD"),o().startOf("day").format("YYYY/MM/DD")]),D=async()=>await L.getTurnoverDetail({begin_time:o(m[0]).unix(),end_time:o(m[1]).unix()}),g=async()=>{var s,i,u,c;const t=await D();E((i=(s=t==null?void 0:t.data)==null?void 0:s.detail)==null?void 0:i.map((p,h)=>({id:`${h}`,value:`${h}`,label:h===0?"\u5168\u90E8":p==null?void 0:p.income}))),F((c=(u=t==null?void 0:t.data)==null?void 0:u.detail)==null?void 0:c.map((p,h)=>({id:`${h}`,...p})))};P(()=>{g()}),T(()=>{g()},[m]);const Y=(t,s)=>{const{income:i,amount:u,introducer_amount:c,order_num:p,retained_amount:h,staff_cost:R}=t;return a("div",{style:{display:"-webkit-box"},className:"flex text-xs mt-2",children:[e("p",{className:"w-45 rounded-l-lg border-r-0 px-2 py-2 border-width-[0.5px] border-color-[#e9e9e9] border-solid",children:i}),e("p",{className:"order-table",children:p}),e("p",{className:"order-table",children:u}),e("p",{className:"order-table",children:R}),e("p",{className:"order-table",children:c}),e("p",{className:"order-table text-right",children:h})]},s)},_=async()=>{await $.uploadFile({type:1,file_type:"xlsx",begin_time:o(m[0]).unix(),end_time:o(m[1]).unix()})},B=()=>{var t;return a("div",{ref:M,className:"flex flex-col pt-5 overflow-x-auto",children:[a("div",{style:{display:"-webkit-box"},className:"pl-2 items-center text-xs font-600",children:[e("p",{className:"w-45",children:"\u6536\u6B3E\u65B9\u5F0F"}),e("p",{className:"w-25",children:"\u9884\u7EA6\u6570\u91CF"}),e("p",{className:"w-25",children:"\u8425\u4E1A\u989D"}),e("p",{className:"w-25",children:"\u5458\u5DE5\u6210\u672C"}),e("p",{className:"w-25",children:"\u4ECB\u7ECD\u4EBA\u63D0\u6210"}),e("p",{className:"w-25 text-right",children:"\u51C0\u8425\u4E1A\u989D"})]}),e(b,{children:n!=="0"?(t=x==null?void 0:x.filter(s=>(s==null?void 0:s.id)===n))==null?void 0:t.map((s,i)=>Y(s,i)):x==null?void 0:x.map((s,i)=>Y(s,i))})]})},r=()=>e("div",{onClick:l,className:"flex items-center ",children:e(y,{name:"filter",className:"w-[15px] h-[15px] mr-1"})}),l=async()=>{const t=await q.prompt({columns:[w],defaultValue:[n]});t&&k(t[0])};return a(b,{children:[e("div",{className:"<sm:hidden",children:e(X,{})}),a("div",{className:"flex flex-col items-center pt-[48px] pb-[90px] w-full sm:hidden",children:[e(H,{renderRight:e(r,{}),title:"\u8425\u4E1A\u989D"}),a("div",{className:`flex flex-col w-[90%] mt-4 ${j.order}`,children:[a("div",{onClick:()=>N(!0),className:"flex rounded-lg px-3 py-1.5 items-center w-full justify-between my-4 bg-[#f4f6f6] border border-width-[0.5px] border-solid border-color-[#e1e5e5]",children:[e(y,{name:"verify-right",className:"w-[6px] h-[12px] transform rotate-z-180"}),e("p",{className:"text-xs",children:`${m[0]}-${m[1]}`}),e(y,{name:"verify-right",className:"w-[6px] h-[12px]"})]}),B(),e("div",{className:"fixed-b-btn flex",children:a("div",{onClick:_,className:"flex w-[70%] rounded-3xl py-1 px-8 bg-[#2A4948] justify-center items-center text-color-[#fff]",children:[e(I,{className:"text-color-[#fff]",fill:"none",children:"\u5BFC\u51FA"}),e(y,{name:"user-left",style:{transform:"rotateZ(90deg"},className:"w-[10px] h-[10px]"})]})}),e(z,{visible:f,onMaskClick:()=>N(!1),bodyStyle:{height:"auto"},children:e(V,{value:m,className:j.calendarCustom,selectionMode:"range",nextYearButton:e(b,{}),prevYearButton:e(b,{}),nextMonthButton:e("div",{className:"flex justify-center items-center rounded-lg py-1 px-3 border border-solid border-color-[#ccc]",children:e(y,{name:"verify-right",className:"w-[8px] h-[12px] !transform !rotate-0"})}),prevMonthButton:e("div",{className:"flex justify-center items-center rounded-lg py-1 px-3 border border-solid border-color-[#ccc]",children:e(y,{name:"verify-right",className:"w-[8px] h-[12px] transform rotate-z-180"})}),weekStartsOn:"Monday",onChange:t=>{v([o(t[0]).format("YYYY/MM/DD"),o(t[1]).format("YYYY/MM/DD")])}})})]})]})]})};export{Ce as default};
