/* empty css                    */import{bT as j,bU as q,n as H,r as d,bV as U,v as Y,Y as z,bW as A,J as B,G as w,bX as G,R as E,b as f,N as J,j as k,m as R,w as I,F as L,bY as X,o as Z,p as W,q as K,g as V,t as Q,bZ as ee,h as ne}from"./index.5670e6e0.js";import{P as te}from"./index.c6660251.js";import{u as ae,a as le}from"./use-gesture-react.esm.346ddc85.js";import{r as se}from"./rubberband.c88fa690.js";import{b as oe}from"./bound.bddb6539.js";function re(t,e){var l;j&&(q(t)||console.error(`useDebounceFn expected parameter is a function, got ${typeof t}`));const v=H(t),n=(l=e==null?void 0:e.wait)!==null&&l!==void 0?l:1e3,c=d.exports.useMemo(()=>U((...o)=>v.current(...o),n,e),[]);return Y(()=>{c.cancel()}),{run:c,cancel:c.cancel,flush:c.flush}}function ie(t,e,l){const[v,n]=d.exports.useState({}),{run:c}=re(()=>{n({})},l);d.exports.useEffect(()=>c(),e),z(t,[v])}var ce=A;function ue(t,e){return ce(t,e)}var de=ue;function fe(t){if(t==null||t==="")return 0;const e=t.trim();return e.endsWith("px")?parseFloat(e):e.endsWith("rem")?parseFloat(e)*parseFloat(window.getComputedStyle(document.documentElement).fontSize):e.endsWith("vw")?parseFloat(e)*window.innerWidth/100:0}const P="adm-picker-view",F=d.exports.memo(t=>{const{value:e,column:l,renderLabel:v}=t;function n(a){t.onSelect(a,t.index)}const[{y:c},o]=B(()=>({from:{y:0},config:{tension:400,mass:.8}})),r=d.exports.useRef(!1),u=d.exports.useRef(null),h=d.exports.useRef(null),p=d.exports.useRef(34);w(()=>{const a=h.current;!a||(p.current=fe(window.getComputedStyle(a).getPropertyValue("height")))}),w(()=>{if(r.current||e===null)return;const a=l.findIndex(i=>i.value===e);if(a<0)return;const s=a*-p.current;o.start({y:s,immediate:c.goal!==s})},[e,l]),w(()=>{if(l.length===0)e!==null&&n(null);else if(!l.some(a=>a.value===e)){const a=l[0];n(a.value)}},[l,e]);function b(a){const s=a*-p.current;o.start({y:s});const i=l[a];!i||n(i.value)}const N=a=>{r.current=!0;const s=-((l.length-1)*p.current),i=0;if(a.last){r.current=!1;const m=a.offset[1]+a.velocity[1]*a.direction[1]*50,g=s<i?-Math.round(oe(m,s,i)/p.current):0;b(g)}else{const m=a.offset[1];o.start({y:se(m,s,i,p.current*50,.2)})}};ae(a=>{a.event.stopPropagation(),N(a)},{axis:"y",from:()=>[0,c.get()],filterTaps:!0,pointer:{touch:!0},target:u}),le(a=>{a.event.stopPropagation(),N(a)},{axis:"y",from:()=>[0,c.get()],preventDefault:!0,target:t.mouseWheel?u:void 0,eventOptions:G?{passive:!1}:!1});let C=null;function $(){if(C===null)return null;const a=l[C],s=C-1,i=C+1,m=l[s],g=l[i];return k("div",{className:"adm-picker-view-column-accessible",children:[f("div",{className:"adm-picker-view-column-accessible-current",role:"button","aria-label":a?`\u5F53\u524D\u9009\u62E9\u7684\u662F\uFF1A${a.label}`:"\u5F53\u524D\u672A\u9009\u62E9",children:"-"}),f("div",{className:"adm-picker-view-column-accessible-button",onClick:()=>{!m||b(s)},role:m?"button":"text","aria-label":m?`\u9009\u62E9\u4E0A\u4E00\u9879\uFF1A${m.label}`:"\u6CA1\u6709\u4E0A\u4E00\u9879",children:"-"}),f("div",{className:"adm-picker-view-column-accessible-button",onClick:()=>{!g||b(i)},role:g?"button":"text","aria-label":g?`\u9009\u62E9\u4E0B\u4E00\u9879\uFF1A${g.label}`:"\u6CA1\u6709\u4E0B\u4E00\u9879",children:"-"})]})}return E.createElement("div",{className:`${P}-column`},f("div",{className:`${P}-item-height-measure`,ref:h}),E.createElement(J.div,{ref:u,style:{translateY:c},className:`${P}-column-wheel`,"aria-hidden":!0},l.map((a,s)=>{var i;const m=t.value===a.value;m&&(C=s);function g(){r.current=!1,b(s)}return f("div",{"data-selected":a.value===e,className:`${P}-column-item`,onClick:g,"aria-hidden":!m,"aria-label":m?"active":"",children:f("div",{className:`${P}-column-item-label`,children:v(a)})},(i=a.key)!==null&&i!==void 0?i:a.value)})),$())},(t,e)=>!(t.index!==e.index||t.value!==e.value||t.onSelect!==e.onSelect||t.renderLabel!==e.renderLabel||t.mouseWheel!==e.mouseWheel||!de(t.column,e.column)));F.displayName="Wheel";function _(t){let e=null;return()=>(e===null&&(e=t()),e)}function O(t,e){const l=_(()=>(typeof t=="function"?t(e):t).map(o=>o.map(r=>typeof r=="string"?{label:r,value:r}:r))),v=_(()=>e.map((c,o)=>{var r;const u=l()[o];return u&&(r=u.find(h=>h.value===c))!==null&&r!==void 0?r:null}));return{get columns(){return l()},get items(){return v()}}}function T(t,e){return d.exports.useMemo(()=>O(t,e),[t,e])}const M=t=>t.label,y="adm-picker-view",me={defaultValue:[],renderLabel:M,mouseWheel:!1,loadingContent:f("div",{className:`${y}-loading-content`,children:f(X,{})})},D=d.exports.memo(t=>{const e=R(me,t),[l,v]=d.exports.useState(e.value===void 0?e.defaultValue:e.value);d.exports.useEffect(()=>{e.value!==void 0&&e.value!==l&&v(e.value)},[e.value]),d.exports.useEffect(()=>{if(e.value===l)return;const r=window.setTimeout(()=>{e.value!==void 0&&e.value!==l&&v(e.value)},1e3);return()=>{window.clearTimeout(r)}},[e.value,l]);const n=T(e.columns,l),c=n.columns;ie(()=>{var r;e.value!==l&&((r=e.onChange)===null||r===void 0||r.call(e,l,n))},[l],{wait:0,leading:!1,trailing:!0});const o=d.exports.useCallback((r,u)=>{v(h=>{const p=[...h];return p[u]=r,p})},[]);return I(e,f("div",{className:`${y}`,children:e.loading?e.loadingContent:k(L,{children:[c.map((r,u)=>f(F,{index:u,column:r,value:l[u],onSelect:o,renderLabel:e.renderLabel,mouseWheel:e.mouseWheel},u)),k("div",{className:`${y}-mask`,children:[f("div",{className:`${y}-mask-top`}),f("div",{className:`${y}-mask-middle`}),f("div",{className:`${y}-mask-bottom`})]})]})}))});D.displayName="PickerView";const ve=D,x="adm-picker",pe={defaultValue:[],closeOnMaskClick:!0,renderLabel:M,destroyOnClose:!1,forceRender:!1},S=d.exports.memo(d.exports.forwardRef((t,e)=>{var l;const{locale:v}=Z(),n=R(pe,{confirmText:v.common.confirm,cancelText:v.common.cancel},t),[c,o]=W({value:n.visible,defaultValue:!1,onChange:s=>{var i;s===!1&&((i=n.onClose)===null||i===void 0||i.call(n))}}),r={toggle:()=>{o(s=>!s)},open:()=>{o(!0)},close:()=>{o(!1)}};d.exports.useImperativeHandle(e,()=>r);const[u,h]=W(Object.assign(Object.assign({},n),{onChange:s=>{var i;const m=O(n.columns,s);(i=n.onConfirm)===null||i===void 0||i.call(n,s,m)}})),p=T(n.columns,u),[b,N]=d.exports.useState(u);d.exports.useEffect(()=>{b!==u&&N(u)},[c]),d.exports.useEffect(()=>{c||N(u)},[u]);const C=K((s,i)=>{var m;N(s),c&&((m=n.onSelect)===null||m===void 0||m.call(n,s,i))}),$=I(n,k("div",{className:x,children:[k("div",{className:`${x}-header`,children:[f("a",{role:"button",className:`${x}-header-button`,onClick:()=>{var s;(s=n.onCancel)===null||s===void 0||s.call(n),o(!1)},children:n.cancelText}),f("div",{className:`${x}-header-title`,children:n.title}),f("a",{role:"button",className:V(`${x}-header-button`,n.loading&&`${x}-header-button-disabled`),onClick:()=>{n.loading||(h(b,!0),o(!1))},"aria-disabled":n.loading,children:n.confirmText})]}),f("div",{className:`${x}-body`,children:f(ve,{loading:n.loading,loadingContent:n.loadingContent,columns:n.columns,renderLabel:n.renderLabel,value:b,mouseWheel:n.mouseWheel,onChange:C})})]})),a=k(te,{style:n.popupStyle,className:V(`${x}-popup`,n.popupClassName),visible:c,position:"bottom",onMaskClick:()=>{var s;!n.closeOnMaskClick||((s=n.onCancel)===null||s===void 0||s.call(n),o(!1))},getContainer:n.getContainer,destroyOnClose:n.destroyOnClose,afterShow:n.afterShow,afterClose:n.afterClose,onClick:n.onClick,forceRender:n.forceRender,stopPropagation:n.stopPropagation,children:[$,f(Q,{position:"bottom"})]});return k(L,{children:[a,(l=n.children)===null||l===void 0?void 0:l.call(n,p.items,r)]})}));S.displayName="Picker";function he(t){return new Promise(e=>{const v=ee(f(()=>{const[n,c]=d.exports.useState(!1);return d.exports.useEffect(()=>{c(!0)},[]),f(S,{...Object.assign({},t,{visible:n,onConfirm:(o,r)=>{var u;(u=t.onConfirm)===null||u===void 0||u.call(t,o,r),e(o)},onClose:()=>{var o;(o=t.onClose)===null||o===void 0||o.call(t),c(!1),e(null)},afterClose:()=>{var o;(o=t.afterClose)===null||o===void 0||o.call(t),v()}})})},{}))})}const ye=ne(S,{prompt:he});export{ye as P,de as i};
