import{n as g,r as m,l as x,i as h,u as v,k as R,j as b,b as p,S as w,s as o,d as N,c as T,U as d,e as U,dl as _}from"./index.5670e6e0.js";import{s as j}from"./index.module.491ae085.js";/* empty css                    *//* empty css                 */function k(s,r){const f=g(s),e=m.exports.useRef(null);return m.exports.useEffect(()=>{if(!(!x(r)||r<0))return e.current=setTimeout(()=>{f.current()},r),()=>{e.current&&clearTimeout(e.current)}},[r]),m.exports.useCallback(()=>{e.current&&clearTimeout(e.current)},[])}function E(){const s=h(),r=v();k(()=>{var e,u,n,c,i;((e=s==null?void 0:s.state)==null?void 0:e.type)==="google"?r("/user"):f({user_type:(u=s==null?void 0:s.state)==null?void 0:u.user_type,email:(n=s==null?void 0:s.state)==null?void 0:n.email,password:(i=(c=s==null?void 0:s.state)==null?void 0:c.formData)==null?void 0:i.password})},1e3);const{run:f}=R(e=>d.login(e),{manual:!0,async onSuccess(e){var u,n,c,i;if(e.status===200){o.dispatch(N(e.data.user_id)),o.dispatch(T(e.data.token));const l=await d.getUserInfo({user_id:e.data.user_id});o.dispatch(U(l.data));const a=await d.getRegionAndArea();a.status===200&&((n=(u=a==null?void 0:a.data)==null?void 0:u.region)==null||n.map(t=>{t.label=t.name,t.value=t.id}),(i=(c=a==null?void 0:a.data)==null?void 0:c.area)==null||i.map(t=>{t.label=t.name,t.value=t.id}),o.dispatch(_(a.data))),l.status===200&&r("/calendar")}}});return b("div",{className:`${j.success} flex flex-col justify-center items-center`,children:[p(w,{name:"success",className:"w-12.5 h-12.5"}),p("p",{className:"text-color-[#000000] text-2xl font-600",children:"\u6CE8\u518C\u6210\u529F"})]})}export{E as default};
