import{F as m}from"./index.11c9b67d.js";import{I as A}from"./index.66fe089c.js";import{i as D,u as k,a as I,j as s,b as e,S as w,B as _,U as d,s as n,d as N,c as v,e as j,dl as b}from"./index.5670e6e0.js";import{E as U}from"./index.1c39e7a0.js";/* empty css                    */import"./is-node-with-content.f661b98b.js";import"./interopRequireDefault.fc5525a1.js";import"./dev-log.6e115cc9.js";import"./index.31244c45.js";import"./index.cb878f88.js";import"./convert-px.daab3cc2.js";import"./CloseCircleFill.55d4b485.js";import"./bound.bddb6539.js";/* empty css                 */const q="_login_10ev6_1",M={login:q};function W(){var f,x;const c=D(),l=k(),[p]=m.useForm(),o=((f=c.state)==null?void 0:f.account)==="merchant",i=((x=c.state)==null?void 0:x.account)==="personal",y=()=>{o&&l("/user/login",{state:{account:"personal"}}),i&&l("/user/login",{state:{account:"merchant"}})},C=async()=>{await p.validateFields().then(async u=>{var B,F,h,g;o&&(u.user_type=2),i&&(u.user_type=1),u.source=u.email.indexOf("@")>-1?1:2;const r=await d.login({...u});if(r.status===200){n.dispatch(N(r.data.user_id)),n.dispatch(v(r.data.token));const E=await d.getUserInfo({user_id:r.data.user_id});n.dispatch(j(E.data));const a=await d.getRegionAndArea();a.status===200&&((F=(B=a==null?void 0:a.data)==null?void 0:B.region)==null||F.map(t=>{t.label=t.name,t.value=t.id}),(g=(h=a==null?void 0:a.data)==null?void 0:h.area)==null||g.map(t=>{t.label=t.name,t.value=t.id}),n.dispatch(b(a.data))),E.status===200&&l("/calendar")}})};return I(()=>{n.dispatch(v("")),n.dispatch(N("")),n.dispatch(b(""))}),s("div",{className:`${M.login} px-8 pt-10 sm:min-h-[100vh] sm:relative sm:flex sm:justify-center sm:items-center sm:overflow-x-hidden`,children:[s("div",{className:"sm:w-[500px] sm:flex sm:flex-col sm:justify-center",children:[s("div",{className:"flex items-center justify-between",children:[e(w,{onClick:()=>l(-1),name:"user-left",className:"w-6.5 h-3 ml-2 cursor-pointer"}),e(w,{name:"logo",className:"w-21 h-5 -ml-6.5"}),e("div",{})]}),s("div",{className:"shadow-sm bg-[#fff] flex flex-col items-center rounded-md mt-14 py-8 ",children:[s("p",{className:"text-center text-color-[#2A4948] text-xl font-600 pb-8",children:[o&&"\u767B\u5F55\u5546\u5BB6\u8D26\u53F7",i&&"\u767B\u5F55\u4E2A\u4EBA\u8D26\u53F7"]}),s(m,{form:p,className:"w-[90%]",requiredMarkStyle:"none",footer:e(_,{onClick:C,loading:"auto",block:!0,type:"submit",color:"primary",loadingIcon:e(U,{}),children:"\u767B\u5F55"}),children:[e(m.Item,{name:"email",label:"\u90AE\u7BB1/\u624B\u673A\u53F7",rules:[{required:!0,pattern:/^(?:04\d{8}|4\d{8})$|^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u6216\u624B\u673A\u53F7"}],children:e(A,{placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1/\u624B\u673A\u53F7"})}),e(m.Item,{name:"password",label:"\u5BC6\u7801",rules:[{required:!0}],children:e(A,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",type:"password"})}),e("div",{onClick:()=>l("/user/verify"),className:"text-xs cursor-pointer text-color-[#859393] pl-[16px] font-500",children:"\u5FD8\u8BB0\u5BC6\u7801\uFF1F"})]}),s("div",{className:"pt-4 flex flex-col items-center",children:[s("p",{className:"text-xs text-color-[#808080]",children:[o&&"\u8FD8\u6CA1\u6709\u5546\u5BB6\u8D26\u53F7\uFF1F",i&&"\u8FD8\u6CA1\u6709\u4E2A\u4EBA\u8D26\u53F7\uFF1F"]}),e("p",{onClick:()=>{var u;return l("/user/register",{state:{account:(u=c.state)==null?void 0:u.account}})},className:"text-xs cursor-pointer",children:"\u7ACB\u5373\u6CE8\u518C"})]})]}),s("div",{className:"shadow-sm bg-[#fff] flex flex-col items-center rounded-md mt-4 py-8",children:[s("p",{className:"text-center text-color-[#2A4948] font-500 pb-1",children:[o&&"\u767B\u5F55\u4E2A\u4EBA\u8D26\u53F7",i&&"\u767B\u5F55\u5546\u5BB6\u8D26\u53F7"]}),s("span",{className:"text-xs text-color-[#606060]",children:[o&&"\u8BBF\u95EE\u60A8\u7684\u4E2A\u4EBA\u5E10\u6237\uFF0C\u8BF7\u8FDB\u5165",i&&"\u8BBF\u95EE\u60A8\u7684\u5546\u5BB6\u5E10\u6237\uFF0C\u8BF7\u8FDB\u5165"]}),s("span",{onClick:y,className:"text-xs cursor-pointer text-color-[#859393] underline",children:[o&&"\u4E2A\u4EBA\u767B\u5F55\u9875\u9762",i&&"\u5546\u5BB6\u767B\u5F55\u9875\u9762"]})]})]}),e("div",{className:"hidden sm:flex sm:fixed sm:top-32 sm:-left-13.5 sm:w-167px sm:h-167px sm:rounded-full sm:bg-[#D2693F]"}),e("div",{className:"hidden sm:flex sm:opacity-50 sm:fixed sm:top-51.25 sm:-left-10.5 sm:w-107px sm:h-107px sm:rounded-full sm:bg-[#C8E3E2]"}),e("div",{className:"hidden sm:flex sm:fixed sm:-right-6 sm:-bottom-10 sm:w-241px sm:h-241px sm:rounded-full sm:bg-[#2A4948]"}),e("div",{className:"hidden sm:flex sm:opacity-50 sm:fixed sm:bottom-20 sm:-right-10 sm:w-107px sm:h-107px sm:rounded-full sm:bg-[#C8E3E2]"})]})}export{W as default};
