import{u as I,i as T,s as j,r as w,k as u,a as E,j as o,b as t,S as y,T as D,U as c}from"./index.5670e6e0.js";import{u as O,P as C,N as q}from"./index.f9bd820a.js";import{s as M}from"./index.module.62e464a3.js";import{u as U}from"./index.5733fb44.js";/* empty css                    *//* empty css                 */import"./dayjs.min.37299693.js";import"./bound.bddb6539.js";import"./index.c6660251.js";const W=()=>{var h,x;const i=I(),d=T(),l=j.getState().global.userId,s=U(document.querySelector("body")),n=(h=d.state)==null?void 0:h.formData,a=(x=d.state)==null?void 0:x.forgetType,[m,r]=w.exports.useState(),[S,f]=w.exports.useState(""),[p]=O({targetDate:m,onEnd:()=>{r(void 0)}}),v=async()=>await c.forgetPassword({...n}),{run:B,refresh:N}=u(v,{manual:!0,onSuccess(e){e.status===200&&(D.show(e.msg),f(e.data.change_id),r(Date.now()+6e4))}}),b=async()=>await c.forgetPasswordOnline({type:a,user_id:l}),{run:P,refresh:A}=u(b,{manual:!0,onSuccess(e){e.status===200&&(D.show(e.msg),f(e.data.change_id),r(Date.now()+6e4))}});E(()=>{a&&P(),n&&B()});const _=async e=>await c.forgetPasswordCheckCode({change_id:S,vcode:e,user_id:l}),{run:k}=u(_,{manual:!0,onSuccess(e){i("/user/change/pwd",{state:{forget_change_id:e.data.change_id}})}}),F=()=>{if(m)return!1;a&&A(),n&&N()},g=e=>{k(e)};return o("div",{className:`${M.verification} px-8 py-8`,children:[o("div",{className:"flex items-center justify-between sm:hidden",children:[t(y,{onClick:()=>i(-1),name:"user-left",className:"w-[26px] h-[12px] ml-2"}),t(y,{name:"logo",className:"w-[84px] h-[20px] -ml-[26px]"}),t("div",{})]}),o("div",{className:"shadow-sm bg-[#fff] flex flex-col items-center rounded-md mt-14 py-8 sm:w-500px sm:m-auto sm:mt-100px",children:[t("p",{className:"text-center text-color-[#2A4948] text-xl font-600",children:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),o("span",{className:"pb-8 text-xs text-color-[#B0B0B0] pt-2",children:["\u56DB\u4F4D\u6570\u4EE3\u7801\u5DF2\u53D1\u9001\u81F3\u60A8\u7684",a?"\u90AE\u7BB1":"\u624B\u673A"]}),(s==null?void 0:s.width)&&(s==null?void 0:s.width)<=640?t(C,{onFill:g,length:4,seperated:!0,keyboard:t(q,{}),style:{"--cell-gap":"16px"},plain:!0}):t(C,{onFill:g,length:4,seperated:!0,style:{"--cell-gap":"16px"},plain:!0}),t("span",{onClick:F,className:"text-xs text-color-[#2A4948] pt-14 underline",children:p===0?"\u91CD\u65B0\u53D1\u9001":`${Math.round(p/1e3)}s\u91CD\u65B0\u53D1\u9001`})]})]})};export{W as default};
