import{i as A,u as C,r as d,k as S,a as D,j as r,b as e,S as j,F as $,B as c,T as z,aD as q}from"./index.5670e6e0.js";import{T as M}from"./index.21b1b6fd.js";import{F as i}from"./index.11c9b67d.js";import{I as k}from"./index.66fe089c.js";import{P}from"./index.77a6b2f7.js";import{p as T}from"./pickBy.15fa557e.js";import{H as V}from"./index.04556cd2.js";import{M as l}from"./manage.653bb3f0.js";import{E as m}from"./index.1c39e7a0.js";/* empty css                    *//* empty css                 */import"./dev-log.6e115cc9.js";import"./is-node-with-content.f661b98b.js";import"./interopRequireDefault.fc5525a1.js";import"./index.31244c45.js";import"./index.cb878f88.js";import"./convert-px.daab3cc2.js";import"./CloseCircleFill.55d4b485.js";import"./bound.bddb6539.js";import"./index.c6660251.js";import"./use-gesture-react.esm.346ddc85.js";import"./rubberband.c88fa690.js";const R="_service_x6o49_1",H="_priceInput_x6o49_39",L="_area_x6o49_48",G="_input_x6o49_60",p={service:R,priceInput:H,area:L,input:G};function pe(){var y,E,g,v,w,N;const t=A(),f=C(),[o]=i.useForm(),[I,h]=d.exports.useState(!1),[s,x]=d.exports.useState([]),n=((y=t==null?void 0:t.state)==null?void 0:y.type)==="edit",F=(E=t==null?void 0:t.state)==null?void 0:E.id,b=async()=>{await o.validateFields().then(async a=>{var B;s.length||z.show("\u8BF7\u9009\u62E9\u5206\u7C7B"),s.length&&(a.type=s[0]),a=T(a,q),n&&(a.id=(B=t==null?void 0:t.state)==null?void 0:B.id);let u;n?u=await l.editServe({...a}):u=await l.addServer({...a}),u.status===200&&f(-1)})},{run:_}=S(()=>l.getServerDetail({id:F}),{onSuccess:a=>{var u;o.setFieldsValue({...a==null?void 0:a.data}),x([(u=a==null?void 0:a.data)==null?void 0:u.type])},manual:!0});return D(()=>{n&&_()}),d.exports.useEffect(()=>{`${s[0]}`=="1"&&o.setFieldsValue({price:"0"})},[s]),r("div",{className:`${p.service} pt-[48px]`,children:[e(V,{renderLeft:!1}),r("div",{className:"flex flex-col px-10 py-12",children:[r("p",{className:"text-2xl font-600 pb-10",children:[((g=t==null?void 0:t.state)==null?void 0:g.type)==="edit"&&"\u7F16\u8F91\u670D\u52A1",((v=t==null?void 0:t.state)==null?void 0:v.type)!=="edit"&&"\u6DFB\u52A0\u65B0\u670D\u52A1"]}),r(i,{form:o,layout:"horizontal",requiredMarkStyle:"none",footer:null,children:[e("div",{className:p.password,children:e(i.Item,{name:"name",label:"\u9879\u76EE",rules:[{required:!0}],children:e(k,{placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0"})})}),e("div",{className:`${p.password}`,children:e(i.Item,{name:"price",label:"\u5B9A\u4EF7",rules:[{required:!0}],children:e(k,{placeholder:"\u8BF7\u8F93\u5165\u5B9A\u4EF7",disabled:`${s[0]}`=="1"})})}),e(i.Item,{children:r("div",{onClick:()=>h(!0),className:"flex justify-between items-center",children:[e("p",{className:"text-sm",children:"\u5206\u7C7B"}),r("div",{className:"flex rounded-2xl items-center ml-3 h-[38px] flex-1 justify-end bg-[#f7f7f7]",children:[r("p",{className:"text-sm pl-3 w-full text-left",children:[`${s[0]}`=="1"&&"\u57FA\u7840\u9879\u76EE",`${s[0]}`=="2"&&"\u989D\u5916\u9879\u76EE"]}),e(j,{name:"phone-bottom",className:"w-[8px] h-[4px] mr-4"})]}),e(i.Item,{arrow:e($,{}),children:e(P,{columns:[[{label:"\u57FA\u7840\u9879\u76EE",value:"1"},{label:"\u989D\u5916\u9879\u76EE",value:"2"}]],visible:I,onClose:()=>{h(!1)},onConfirm:a=>{x(a)}})})]})}),e(i.Item,{name:"remark",label:"\u5907\u6CE8",children:e(M,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",autoSize:{minRows:7,maxRows:7}})}),((w=t==null?void 0:t.state)==null?void 0:w.type)==="edit"&&r("div",{className:"fixed-b-btn flex justify-around",children:[e(c,{onClick:async()=>{(await l.deleteServe({id:F})).status===200&&f("/manage/service/list")},loading:"auto",loadingIcon:e(m,{}),className:"w-[30%] border-0 text-color-[red] bg-[#F3F3F3]",shape:"rounded",block:!0,size:"large",children:"\u5220\u9664"}),e(c,{onClick:b,className:"w-[30%]",shape:"rounded",block:!0,type:"submit",size:"large",color:"primary",loading:"auto",loadingIcon:e(m,{}),children:"\u4FDD\u5B58"})]}),((N=t==null?void 0:t.state)==null?void 0:N.type)!=="edit"&&e("div",{className:"fixed-b-btn w-full",children:e(c,{onClick:b,className:"w-[70%]",shape:"rounded",block:!0,type:"submit",size:"large",color:"primary",loading:"auto",loadingIcon:e(m,{}),children:"\u786E\u8BA4"})})]})]})]})}export{pe as default};
