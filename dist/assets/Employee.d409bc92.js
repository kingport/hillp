import{r as d,s as O,a0 as i,a as T,Y as V,j as s,b as e,an as A,F as N,S as b,B as q}from"./index.5670e6e0.js";import{C as z}from"./index.4b5b1278.js";import{P as H}from"./index.77a6b2f7.js";import{P as I}from"./index.c6660251.js";import{D as P,s as j}from"./index.module.1ebac123.js";import{D as $}from"./data.6b019071.js";import{H as U}from"./index.04556cd2.js";import{D as W}from"./index.60148415.js";import{D as Z,S as G}from"./dropdown.706ec38f.js";import{P as J,F as K}from"./Pcmenu.e798bd62.js";import{d as Y}from"./dayjs.min.37299693.js";import{A as Q}from"./ArrowDownOutlined.245c08f2.js";/* empty css                    *//* empty css                 */import"./isoWeek.f8ad8697.js";import"./use-gesture-react.esm.346ddc85.js";import"./rubberband.c88fa690.js";import"./bound.bddb6539.js";import"./PurePanel.2a417db7.js";import"./index.42a6e0fb.js";import"./statusUtils.6dc02607.js";import"./index.92e459fd.js";import"./index.a450b78e.js";import"./collapse.e34cf270.js";import"./useFlexGapSupport.172cfcf4.js";const{RangePicker:X}=W,ee=L=>{const C=d.exports.useRef(null),c=O.getState().global.userInfo,[f,w]=d.exports.useState([]),[M,F]=d.exports.useState([]),[h,E]=d.exports.useState("0"),[l,k]=d.exports.useState([i().add("-6","d").format("YYYY/MM/DD"),i().startOf("day").format("YYYY/MM/DD")]),u=async()=>await $.getChannelOrStaffDetail({begin_time:i(l[0]).unix(),end_time:i(l[1]).unix()}),g=async()=>{var o,t,a,n;const r=await u();F((t=(o=r==null?void 0:r.data)==null?void 0:o.detail)==null?void 0:t.map((p,m)=>({key:`${m}`,label:m===0?"\u5168\u90E8":p.income}))),w((n=(a=r==null?void 0:r.data)==null?void 0:a.detail)==null?void 0:n.map((p,m)=>({id:`${m}`,...p})))};T(()=>{g()}),V(()=>{g()},[l]);const v=(r,o)=>{const{income:t,earn:a,parent:n,order_num:p,total:m,staff_cost:x}=r;return s("div",{style:{display:"-webkit-box"},className:"flex text-xs mt-2",children:[e("p",{className:"w-45 border-l-0 border-r-0 px-2 py-4 border-width-[0.5px] border-color-[#e9e9e9] border-solid",children:t}),e("p",{className:"order-table py-4",children:p}),e("p",{className:"order-table py-4",children:x}),e("p",{className:"order-table py-4",children:a}),s("p",{className:"order-table py-4",children:[n,"%"]}),e("p",{className:"order-table py-4 text-right",children:m})]},o)},B=async()=>{const r={type:3,file_type:"xlsx",begin_time:i(l[0]).unix(),end_time:i(l[1]).unix()};await P.uploadFile(r)},D=()=>{var r;return s("div",{ref:C,className:"flex flex-col pt-5 overflow-x-auto w-700px",children:[s("div",{style:{display:"-webkit-box"},className:"pl-2 items-center text-xs font-600",children:[e("p",{className:"w-45",children:"\u6536\u6B3E\u65B9\u5F0F"}),e("p",{className:"w-25",children:"\u9884\u7EA6\u6570\u91CF"}),e("p",{className:"w-25",children:(c==null?void 0:c.user_type)===1?"\u6210\u672C":"\u5458\u5DE5\u6210\u672C"}),e("p",{className:"w-25",children:"\u51C0\u8425\u4E1A\u989D"}),e("p",{className:"w-25",children:"\u767E\u5206\u6BD4"}),e("p",{className:"w-25 text-right",children:"\u603B\u8425\u4E1A\u989D"})]}),e(N,{children:h!=="0"?(r=f==null?void 0:f.filter(o=>(o==null?void 0:o.id)===h))==null?void 0:r.map((o,t)=>v(o,t)):f==null?void 0:f.map((o,t)=>v(o,t))})]})},S={items:M,onClick:r=>{r.key&&E(r.key)}};return s("div",{className:"flex w-[calc(100vw-60px)] min-h-[calc(100vh-60px)]",children:[e("div",{className:"w-165px border-color-[#000] border-opacity-20 pt-10 border border-solid border-l-0 border-t-0 border-b-0",children:e(J,{})}),s("div",{className:"flex flex-col flex-1  items-center pt-20",children:[s("div",{className:"flex w-full justify-between items-center w-700px",children:[e("p",{className:"font-600 text-2xl",children:(c==null?void 0:c.user_type)===1?"\u6E20\u9053\u5217\u8868":"\u5458\u5DE5\u5217\u8868"}),e(A,{onClick:B,style:{display:"flex",alignItems:"center"},type:"primary",icon:e(Q,{}),children:"\u5BFC\u51FA"})]}),e("div",{className:"w-700px bg-[#f6f6f6] flex justify-end py-5 rounded-md my-4",children:s("div",{className:"flex items-center justify-end",children:[e(X,{style:{minWidth:160},className:"!bg-[#fff] rounded-2xl",value:[Y(l[0]),Y(l[1])],placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],onChange:r=>{r&&k([Y(r[0]).format("YYYY/MM/DD"),Y(r[1]).format("YYYY/MM/DD")])}}),e(Z,{menu:S,children:e(A,{type:"primary",className:"mx-4",children:s(G,{children:["\u7B5B\u9009",e(K,{})]})})})]})}),D()]})]})},Me=L=>{const C=d.exports.useRef(null),c=O.getState().global.userInfo,[f,w]=d.exports.useState(!1),[M,F]=d.exports.useState([]),[h,E]=d.exports.useState("0"),[l,k]=d.exports.useState([]),[u,g]=d.exports.useState([i().add("-6","d").format("YYYY/MM/DD"),i().startOf("day").format("YYYY/MM/DD")]),v=async()=>await $.getChannelOrStaffDetail({begin_time:i(u[0]).unix(),end_time:i(u[1]).unix()}),B=async()=>{var a,n,p,m;const t=await v();F((n=(a=t==null?void 0:t.data)==null?void 0:a.detail)==null?void 0:n.map((x,y)=>({value:`${y}`,label:y===0?"\u5168\u90E8":x.income}))),k((m=(p=t==null?void 0:t.data)==null?void 0:p.detail)==null?void 0:m.map((x,y)=>({id:`${y}`,...x})))};d.exports.useEffect(()=>{B()},[u]);const D=(t,a)=>{const{income:n,earn:p,parent:m,order_num:x,total:y,staff_cost:R}=t;return s("div",{style:{display:"-webkit-box"},className:"flex text-xs mt-2",children:[e("p",{className:"w-45 rounded-l-lg border-r-0 px-2 py-2 border-width-[0.5px] border-color-[#e9e9e9] border-solid",children:n}),e("p",{className:"order-table",children:x}),e("p",{className:"order-table",children:R}),e("p",{className:"order-table",children:p}),s("p",{className:"order-table",children:[m,"%"]}),e("p",{className:"order-table text-right",children:y})]},a)},_=async()=>{const t={type:3,file_type:"xlsx",begin_time:i(u[0]).unix(),end_time:i(u[1]).unix()};await P.uploadFile(t)},S=()=>{var t;return s("div",{ref:C,className:"flex flex-col pt-5 overflow-x-auto",children:[s("div",{style:{display:"-webkit-box"},className:"pl-2 items-center text-xs font-600",children:[e("p",{className:"w-45",children:"\u6536\u6B3E\u65B9\u5F0F"}),e("p",{className:"w-25",children:"\u9884\u7EA6\u6570\u91CF"}),e("p",{className:"w-25",children:(c==null?void 0:c.user_type)===1?"\u6210\u672C":"\u5458\u5DE5\u6210\u672C"}),e("p",{className:"w-25",children:"\u51C0\u8425\u4E1A\u989D"}),e("p",{className:"w-25",children:"\u767E\u5206\u6BD4"}),e("p",{className:"w-25 text-right",children:"\u603B\u8425\u4E1A\u989D"})]}),e(N,{children:h!=="0"?(t=l==null?void 0:l.filter(a=>(a==null?void 0:a.id)===h))==null?void 0:t.map((a,n)=>D(a,n)):l==null?void 0:l.map((a,n)=>D(a,n))})]})},r=()=>e("div",{onClick:o,className:"flex items-center ",children:e(b,{name:"filter",className:"w-[15px] h-[15px] mr-1"})}),o=async()=>{const t=await H.prompt({columns:[M],defaultValue:[h]});t&&E(t[0])};return s(N,{children:[e("div",{className:"<sm:hidden",children:e(ee,{})}),s("div",{className:"flex flex-col items-center pt-[48px] pb-[90px] w-full sm:hidden",children:[e(U,{renderRight:e(r,{}),title:(c==null?void 0:c.user_type)===1?"\u6E20\u9053\u5217\u8868":"\u5458\u5DE5\u5217\u8868"}),s("div",{className:`flex flex-col w-[90%] mt-4 ${j.order}`,children:[s("div",{onClick:()=>w(!0),className:"flex rounded-lg px-3 py-1.5 items-center w-full justify-between my-4 bg-[#f4f6f6] border border-width-[0.5px] border-solid border-color-[#e1e5e5]",children:[e(b,{name:"verify-right",className:"w-[6px] h-[12px] transform rotate-z-180"}),e("p",{className:"text-xs",children:`${u[0]}-${u[1]}`}),e(b,{name:"verify-right",className:"w-[6px] h-[12px]"})]}),S(),e("div",{className:"fixed-b-btn flex",children:s("div",{onClick:_,className:"flex w-[70%] rounded-3xl py-1 px-8 bg-[#2A4948] justify-center items-center text-color-[#fff]",children:[e(q,{className:"text-color-[#fff]",fill:"none",children:"\u5BFC\u51FA"}),e(b,{name:"user-left",style:{transform:"rotateZ(90deg"},className:"w-[10px] h-[10px]"})]})}),e(I,{visible:f,onMaskClick:()=>w(!1),bodyStyle:{height:"auto"},children:e(z,{value:u,className:j.calendarCustom,selectionMode:"range",nextYearButton:e(N,{}),prevYearButton:e(N,{}),nextMonthButton:e("div",{className:"flex justify-center items-center rounded-lg py-1 px-3 border border-solid border-color-[#ccc]",children:e(b,{name:"verify-right",className:"w-[8px] h-[12px] !transform !rotate-0"})}),prevMonthButton:e("div",{className:"flex justify-center items-center rounded-lg py-1 px-3 border border-solid border-color-[#ccc]",children:e(b,{name:"verify-right",className:"w-[8px] h-[12px] transform rotate-z-180"})}),weekStartsOn:"Monday",onChange:t=>{g([i(t[0]).format("YYYY/MM/DD"),i(t[1]).format("YYYY/MM/DD")])}})})]})]})]})};export{Me as default};
