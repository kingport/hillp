import{r as d,u as I,k as E,j as a,b as s,S as Y,F as l,aI as O,dg as N,T as R,a0 as k,dh as T,aF as P}from"./index.5670e6e0.js";import{H as V}from"./index.04556cd2.js";import{H as z}from"./index.9fe94518.js";/* empty css                    *//* empty css                 */import"./index.c6660251.js";const G="_onlineBooking_r6cqx_1",J="_content_r6cqx_5",K="_contentList_r6cqx_8",Q="_scaleFont_r6cqx_12",o={onlineBooking:G,content:J,contentList:K,scaleFont:Q},se=()=>{const[B,i]=d.exports.useState(!1),[D,p]=d.exports.useState(1),[h,x]=d.exports.useState([]),[_,f]=d.exports.useState(!0),w=I(),C=(t,e,r)=>P.editOrder({source:t,id:e});let y=null;const S=async()=>{const t=await N.getMessageList({page:D,type:1});p(e=>e+1),y=t.data.data.length,x([...h,...t.data.data]),f(t.data.data.length>0)},{runAsync:g}=E(C,{manual:!0,onSuccess(t){R.show(t==null?void 0:t.msg)}}),$=async t=>await N.messageoperation(t),{runAsync:c}=E($,{manual:!0,onSuccess(t){i(!1)}}),u=async(t,e)=>{var r,F,A,v,b;if(t.stopPropagation(),[1,2,200,4].includes(e==null?void 0:e.source)){const n=await c({id:e.id,type:1,operation:1});(n==null?void 0:n.status)===200&&w("/calendar/view",{state:{id:(r=e==null?void 0:e.extra_params)==null?void 0:r.id}})}if([3,301].includes(e==null?void 0:e.source)){if(((F=e==null?void 0:e.extra_params)==null?void 0:F.server_type)===2){const n=await g(5,(A=e==null?void 0:e.extra_params)==null?void 0:A.id);(n==null?void 0:n.status)===200&&(await c({id:e.id,type:1,operation:1})).status===200&&(p(1),x([]),f(!0))}if(((v=e==null?void 0:e.extra_params)==null?void 0:v.server_type)===1){const n=await g(8,(b=e==null?void 0:e.extra_params)==null?void 0:b.id);(n==null?void 0:n.status)===200&&(await c({id:e.id,type:1,operation:1})).status===200&&(p(1),x([]),f(!0))}}},M=()=>i(!0),H=t=>{const{source:e}=t;return e===1?s("div",{className:"text-xs rounded-[20px] py-0.5 px-2 ml-3 border border-color-[#D2693F] border-solid text-color-[#D2693F]",children:"\u65B0\u9884\u7EA6"}):[2,200].includes(e)?s("div",{className:"text-xs rounded-[20px] py-0.5 px-2 ml-3 border border-color-[#2A4948] border-solid text-color-[#2A4948]",children:"\u5DF2\u5B8C\u6210"}):[3,300,301].includes(e)?s("div",{className:"text-xs rounded-[20px] py-0.5 px-2 ml-3 border border-color-[#2A4948] border-solid text-color-[#2A4948]",children:"\u5DF2\u63A5\u5355"}):[302,303].includes(e)?s("div",{className:"text-xs rounded-[20px] py-0.5 px-2 ml-3 border border-color-[#2A4948] border-solid text-color-[#2A4948]",children:"\u8FDB\u884C\u4E2D"}):[4].includes(e)?s("div",{className:"text-xs rounded-[20px] py-0.5 px-2 ml-3 border border-color-[#2A4948] border-solid text-color-[#2A4948]",children:"\u5DF2\u53D6\u6D88"}):s(l,{})},q=t=>{const{source:e}=t;return[1,200,4].includes(e)?s("div",{onClick:r=>u(r,t),className:`${o.scaleFont} h-h24 text-[#2A4948] text-center underline`,children:"\u67E5\u770B\u9884\u7EA6"}):[2].includes(e)?s("div",{onClick:r=>u(r,t),className:`${o.scaleFont} h-h24 text-[#2A4948] text-center underline`,children:"\u524D\u5F80\u8BC4\u5206"}):[3].includes(e)?s("div",{onClick:r=>u(r,t),className:`${o.scaleFont} bg-[#2A4948] py-2 px-2 w-20 h-h24 text-[#fff] text-xs text-center rounded-[20px]`,children:"\u5458\u5DE5\u5230\u8FBE"}):[303].includes(e)?s("div",{className:`${o.scaleFont} bg-[#2A4948] py-2 px-2 w-20 h-h24 text-[#fff] text-xs text-center rounded-[20px] opacity-50`,children:"\u5458\u5DE5\u5230\u8FBE"}):[301].includes(e)?s("div",{onClick:r=>u(r,t),className:`${o.scaleFont} bg-[#2A4948] py-2 px-2 w-20 h-h24 text-[#fff] text-xs text-center rounded-[20px]`,children:"\u53D1\u9001\u623F\u95F4\u53F7"}):[300,302].includes(e)?s("div",{className:`${o.scaleFont} bg-[#2A4948] py-2 px-2 w-20 h-h24 text-[#fff] text-xs text-center rounded-[20px] opacity-50`,children:"\u53D1\u9001\u623F\u95F4\u53F7"}):s(l,{})},L=t=>{const{source:e}=t;if([1,200,4,2,3,303,301,300,302].includes(e))return!1;c({id:t.id,type:1,operation:1})},j=(t,e)=>a("div",{className:`flex justify-between items-center p-4 bg-[#fff] mb-4 shadow-sm rounded-xl ${(t==null?void 0:t.is_read)===1?"opacity-50":"opacity-100"}`,onClick:()=>L(t),children:[a("div",{children:[a("div",{className:"text-[#2A4948] text-sm  font-600 my-2",children:[a("div",{className:"flex",children:[s("div",{children:k((t==null?void 0:t.title)*1e3).format("YYYY/MM/DD")}),s("div",{className:`${o.scaleFont}`,children:H(t)})]}),s("p",{children:k((t==null?void 0:t.title)*1e3).format("HH:mm")})]}),s("div",{className:"text-gray-500 text-xs",children:s("p",{style:{whiteSpace:"pre-wrap"},children:t==null?void 0:t.text})})]}),q(t)]},e);return a("div",{className:`${o.onlineBooking} pt-[48px]`,children:[s(V,{title:"\u7EBF\u4E0A\u9884\u7EA6\u63D0\u9192",border:!0,renderRight:s(Y,{onClick:()=>M(),style:{color:"##2A4948",width:"20px",height:"48px"},name:"icon-more"})}),y===0&&s("div",{className:`${o.content} flex justify-center items-center`,children:s(T,{img:"online-booking-empty-page",text:a(l,{children:[s("p",{children:"\u4E0A\u7EBFMarketplace\u540E"}),s("p",{children:"\u7EBF\u4E0A\u9884\u7EA6\u901A\u77E5\u4F1A\u51FA\u73B0\u5728\u8FD9\u91CC"})]})})}),a("div",{className:`${o.contentList}`,children:[s(l,{children:h.map((t,e)=>j(t,e))}),s(O,{loadMore:S,hasMore:_})]}),s(z,{actions:[{text:"\u5C06\u6240\u6709\u901A\u77E5\u6807\u8BB0\u4E3A\u5DF2\u8BFB",key:"empty",onClick(){c({id:"",type:1,operation:1})}},{text:"\u5168\u90E8\u5220\u9664",key:"delete",danger:!0,onClick(){c({id:"",type:1,operation:2})}}],visible:B,setVisible:i})]})};export{se as default};
