import{F as x}from"./index.11c9b67d.js";import{I}from"./index.66fe089c.js";import{i as _,u as L,dk as j,k as U,j as o,b as t,S as f,B as S,U as n,T,s as p,d as q,c as $,e as G,dl as M}from"./index.5670e6e0.js";import{s as g}from"./index.module.491ae085.js";import{E as P}from"./index.1c39e7a0.js";/* empty css                    */import"./is-node-with-content.f661b98b.js";import"./interopRequireDefault.fc5525a1.js";import"./dev-log.6e115cc9.js";import"./index.31244c45.js";import"./index.cb878f88.js";import"./convert-px.daab3cc2.js";import"./CloseCircleFill.55d4b485.js";import"./bound.bddb6539.js";/* empty css                 */function ae(){var B,w;const c=_(),i=L(),[m]=x.useForm(),r=((B=c.state)==null?void 0:B.account)==="merchant",d=((w=c.state)==null?void 0:w.account)==="personal",A=()=>{var e;i("/user/login",{state:{account:(e=c.state)==null?void 0:e.account}})};let l=0;r&&(l=2),d&&(l=1);const k=async()=>{await(m==null?void 0:m.validateFields().then(async e=>{var a;const s=await n.getEmailCode({...e,user_type:l});(s==null?void 0:s.status)===200&&T.show({content:s==null?void 0:s.msg,duration:1e3}),i("/user/register/email",{state:{account:(a=c.state)==null?void 0:a.account,email:e.email}})}))},h=e=>{var s;i("/user/register/account",{state:{register_code:e.data.register_code,account:(s=c.state)==null?void 0:s.account,type:"google"}})},F=async e=>{var b,N,E,v;p.dispatch(q(e.data.user_id)),p.dispatch($(e.data.token));const s=await n.getUserInfo({user_id:e.data.user_id});p.dispatch(G(s.data));const a=await n.getRegionAndArea();a.status===200&&((N=(b=a==null?void 0:a.data)==null?void 0:b.region)==null||N.map(u=>{u.label=u.name,u.value=u.id}),(v=(E=a==null?void 0:a.data)==null?void 0:E.area)==null||v.map(u=>{u.label=u.name,u.value=u.id}),p.dispatch(M(a.data)),i("/calendar"))},y=j({flow:"implicit",onSuccess:async e=>{const s=await n.googleLogin({user_type:l,code:e==null?void 0:e.access_token});s.status===201&&h(s),s.status===200&&F(s)}}),C=()=>{window.FB.login(function(e){var s,a;(s=e==null?void 0:e.authResponse)!=null&&s.accessToken&&D({code:(a=e==null?void 0:e.authResponse)==null?void 0:a.accessToken,user_type:l})},{scope:"public_profile,email,user_friends"})},{run:D}=U(e=>n.facebookLogin(e),{manual:!0,onSuccess(e){e.status===201&&h(e),e.status===200&&F(e)}});return o("div",{className:`${g.register} px-8 pt-10 sm:min-h-[100vh] sm:flex sm:justify-center sm:items-center`,children:[o("div",{className:"sm:w-[500px] sm:flex sm:flex-col sm:justify-center",children:[o("div",{className:"flex items-center justify-between",children:[t(f,{onClick:()=>i(-1),name:"user-left",className:"w-6.5 h-3 ml-2 cursor-pointer"}),t(f,{name:"logo",className:"w-21 h-5 -ml-6.5"}),t("div",{})]}),o("div",{className:"shadow-sm bg-[#fff] flex flex-col items-center rounded-md mt-14 py-8",children:[o("p",{className:"text-center text-color-[#2A4948] text-xl font-600",children:[r&&"\u6CE8\u518C\u5546\u5BB6\u8D26\u53F7",d&&"\u6CE8\u518C\u4E2A\u4EBA\u8D26\u53F7"]}),o("span",{className:"pb-8 text-xs text-color-[#B0B0B0] pt-2",children:[r&&"\u521B\u5EFA\u5E10\u6237\u6216\u767B\u5F55\u6765\u7BA1\u7406\u60A8\u7684\u56E2\u961F",d&&"\u521B\u5EFA\u5E10\u6237\u6216\u767B\u5F55\u6765\u7BA1\u7406\u60A8\u7684\u6392\u73ED"]}),t(x,{form:m,className:"w-[90%]",requiredMarkStyle:"none",footer:t(S,{onClick:k,size:"large",block:!0,color:"primary",loading:"auto",loadingIcon:t(P,{}),children:"\u521B\u5EFA"}),children:t(x.Item,{name:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1",type:"email"}],children:t(I,{placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"})})}),o("div",{className:"pt-4 flex flex-col items-center w-full",children:[t("p",{className:"text-xs text-color-[#2A4948] pb-4",children:"- \u7B2C\u4E09\u65B9\u8D26\u6237\u767B\u5F55 -"}),o("div",{onClick:()=>y(),className:"flex cursor-pointer items-center shadow-sm w-[80%] bg-[#fff] rounded-lg h-9 px-4",children:[t("div",{className:`${g.icon} w-[30px] h-full flex items-center`,children:t(f,{name:"google",className:"w-[16px] h-[16px]"})}),t("span",{className:"flex-1 text-center font-500 text-xs text-color-[#262626]",children:"\u4F7F\u7528Google\u767B\u5F55"})]}),o("div",{onClick:C,className:"flex cursor-pointer mt-2 items-center shadow-sm w-[80%] bg-[#fff] rounded-lg h-9 px-4",children:[t("div",{className:`${g.icon} w-[30px] h-full flex items-center`,children:t(f,{name:"Facebook",className:"w-[16px] h-[16px]"})}),t("span",{className:"flex-1 text-center font-500 text-xs text-color-[#262626]",children:"\u4F7F\u7528Facebook\u767B\u5F55"})]}),o("span",{className:"pt-8 text-xs text-color-[#859393]",children:[r&&"\u5DF2\u6709\u5546\u5BB6\u8D26\u53F7\uFF1F",d&&"\u5DF2\u6709\u4E2A\u4EBA\u8D26\u53F7\uFF1F"]}),t("span",{onClick:()=>A(),className:"text-xs cursor-pointer text-color-[#2A4948]",children:"\u9A6C\u4E0A\u767B\u5F55"})]})]})]}),t("div",{className:"hidden sm:flex sm:absolute sm:top-32 sm:-left-13.5 sm:w-167px sm:h-167px sm:rounded-full sm:bg-[#D2693F]"}),t("div",{className:"hidden sm:flex sm:opacity-50 sm:absolute sm:top-51.25 sm:-left-10.5 sm:w-107px sm:h-107px sm:rounded-full sm:bg-[#C8E3E2]"}),t("div",{className:"hidden sm:flex sm:absolute sm:-right-10 sm:-bottom-10 sm:w-241px sm:h-241px sm:rounded-full sm:bg-[#2A4948]"}),t("div",{className:"hidden sm:flex sm:opacity-50 sm:absolute sm:bottom-20 sm:-right-10.5 sm:w-107px sm:h-107px sm:rounded-full sm:bg-[#C8E3E2]"})]})}export{ae as default};
